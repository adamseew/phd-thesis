
%%%%%%%%%%%%%%%%%%%%%%
%                    %
% State of the Art   %
%                    %
\chapter{State of the Art}
\label{cp:soa}

In this chapter, we discuss the state of the art in energy modeling and optimization of computing hardware and mobile robots and in planning for mobile robots. There is a considerable body of knowledge in energy modeling for computing hardware, especially if battery powered~\citep{rao2005battery}. When such hardware is onboard a mobile robot, studies on energy efficiency often focus on the energy for the motion on e.g., a planned path, and neglect the computing hardware~\citep{ondruska2015scheduled}. Planning algorithms in robotics literature center around robot motion planning and deal with problems such as swarms, dynamics, and uncertainty~\citep{lavalle2006planning}. By illustrating several contributions applied to a variety of robots, we primarily focus on the literature that--similarly to our approach--plans the path and schedules the computations. We es especially emphasize studies applied to mobile robots with energy constraints.

We split the chapter into multiple sections and replicate our workflow throughout the topic. Initially, we analyzed some contributions that quantify the energy consumption of computing hardware carried by mobile robots. Modeling the energy of these devices has laid the foundations for our energy-efficient planning. In~\fref{sec:soa-ene-mod}{Section}, we report our findings spanning broadly to generic computations energy modeling. We discuss the available approaches for battery modeling and the battery modeling and optimization of the mobile computing hardware in~\fref{sec:soa-ene-bat}{Section}. We then discuss studies on motion planning for mobile robots generically and planning for aerial robots in~\fref{sec:soa-motion-pl}{Sections}\fref{sec:soa-aerial-pl}{--\hspace{-.8ex}}. For both, we detail approaches in coverage path planning and the derivation of optimal coverage. Although simultaneous planning of computations and motion remains mostly unexplored~\citep{brateman2006energy,ondruska2015scheduled,sudhakar2020balancing}, some studies have proposed various techniques and further motivated our analysis. We report these in detail in~\fref{sec:soa-comp-motion-pl}{Section}.

This chapter connects to the remainder of this work as follows. Here we discuss the state of the art on topics that allowed us to derive a coverage planning and scheduling approach for autonomous aerial robots. Based on these findings, we later propose a computations energy modeling technique to derive
future energy consumption of mobile computing hardware along with motion in~\fref{cp:model}{Chapter}. Planning in the context of mobile robots, for aerial robots, of the coverage, and computations and motion, are the basis for the derivation of the optimal configuration in~\fref{cp:dyn}{Chapter}. We use such configuration to replan an initial plan; to solve the planning and coverage problems that we defined in~\fref{cp:pb}{Chapter}. \fref{cp:opt}{Chapter} then contains some further discussion of known principles in optimal control and state estimation that we extensively use in \fref{cp:pb}{Chapter}.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Computations Energy Modeling}
\label{sec:soa-ene-mod}

There are several different energy modeling and optimization approaches for computations, usually under the topic of energy efficiency for computing hardware.
Such hardware is carried by aerial robots that we analyze in this work and is often composed of heterogeneous elements: one or more CPUs and a GPU as we outlined in \fref{sec:motivation}{Section}. Energy efficiency is critical for battery-constrained devices~\citep{rao2005battery} and a limiting factor in improving further computing performance~\citep{horowitz2014computing}. We split some of the available approaches in the literature into different classes, depending on their modeling and optimization approach. We illustrate an overview of the approaches we consider in \fref{tab:energy-models}{Table}. Due to the unpredictable nature of the heterogeneous elements, many contributions to energy modeling observe hardware characteristics and perform physical energy consumption measurements to derive an energy model. We analyze some of these contributions first. They treat the heterogeneous elements altogether and are of particular interest to our approach where we use heterogeneous mobile computing hardware. We then analyze the techniques that focus on the energy of GPUs. Finally, we analyze techniques that treat CPUs. Some of the latter are based on dynamic voltage scaling (\Gls{acr:dvs})\findex{dynamic voltage scaling} that scales down both the supply voltage and the frequency when there is no high computations demand~\citep{flautner2001automatic, chen2009fundamentals}. A review of techniques with different computing elements that focus on predictive modeling is provided by O'Neal~and~Brisk~\citep{oneal2018predictive} with emphasis on heterogeneous models based on machine learning.
Some other reviews that deal with energy modeling and focus on high-performance computing (HPC) systems are provided by O'Brien~et~al.\citep{obrien2017survey} and Czarnul~et~al.\citep{czarnul2019energy}. In the context of energy modeling, Czarnul~et~al. report existing tools for energy prediction in HPC systems and O'Brien~et~al. the accuracy of different models in the literature.

\begin{sidewaystable}
  \rotatesidewayslabel
    \footnotesize\fontfamily{phv}\selectfont
    \begin{tabularx}{\textwidth}{l|*{6}{l|}X|l}\hline
      &  & Model & Technique & Accuracy & DVS & DFS & Platform & Mobile \\
      \hline
      \multirow{8}*{\rotatebox{90}{Heterogeneous}} & Marowka & Analytical & Selection & - & \xmark & \xmark & Intel Core-i7-960 (CPU), NVIDIA GTX 280 (GPU) & \xmark \\
      & Bailey et al. & Regression & Configuration & 91\%\footnote{accuracy under-limit against oracle with perfect knowledge} & \xmark & \xmark & AMD A10-5800K (CPU), Radeon HD7660D (GPU) & \xmark\\
      & Goraczko et al. & Analytical & Configuration\footnote{optimization problem solved with ILP} & - & (\cmark) & (\cmark) & ARM7 OKI ML675003 (CPU), TI MSP430F1611 (microcontroller) & \cmark  \\
      & Ma et al. & - & Configuration & - & \cmark & \cmark & AMD Phenom II X2 (CPU), NVIDIA GeForce 8800 (GPU) & \xmark \\
      & Yang et al. & Analytical & Pruning & - & \xmark & \xmark & - & \xmark\\
      & Calore et al. & Analytical & Selection & - & \xmark & [\cmark] & ARM Cortex-A15 (CPU), NVIDIA GK20A (GPU) & \cmark\\\hline
      \multirow{5}*{\rotatebox{90}{GPU}} & Hong and Kim & Analytical & Selection & 91.06\%\footnote{average accuracy for both power and time models against measuring hardware} & \xmark & \xmark & NVIDIA GTX280 (GPU) & \xmark\\
      & Wu et al. & Regression (ML) & Selection & 90\%\footnote{\label{foot:avg-in-tab-energy-model}accuracy against built-in power monitors (if the accuracy is reported for multiple hardware or benchmarks, it is average)} & \xmark & [\cmark] & AMD Radeon HD 7970 (GPU) & \xmark\\
      & Collange et al. & - & Selection & - & \xmark & \xmark & NVIDIA G80, G92, GT200 (GPU) & \xmark\\
      & Luo and Suda & Analytical & - & 88.87\%\footnoteref{foot:avg-in-tab-energy-model} & \xmark & \xmark & NVIDIA Tesla C2050 (GPU) & \xmark \\
      & Leng et al. & Analytical & Selection & 88.35\%\footnoteref{foot:avg-in-tab-energy-model} & \cmark & \cmark & NVIDIA GTX 480, Quadro FX5600 (GPU) & \xmark \\\hline
      \multirow{6}*{\rotatebox{90}{CPU}} & Lee and Brooks & Regression & Selection & 95.7\%\footnote{accuracy against median error, leveraging only the most relevant samples} & \xmark & \xmark & - & \xmark \\
      & Takouna et al. & Regression & Selection & 93\%\footnote{accuracy of 95\% of the predictions} & \xmark & \cmark & Intel Xeon E5540 (CPU) & \xmark \\
      & Reddy et al. & Analytical & Selection & 94\%\footnote{accuracy on 60 workloads}\textsuperscript{, }\footnoteref{foot:avg-in-tab-energy-model} & \cmark & \cmark & ARM Cortex-A15 (CPU) & \cmark \\
      & Nikov et al. & Regression & Selection & 92--95\%\footnote{accuracy against related work} & \cmark & \cmark & ARM Cortex-A15, Cortex-A7 (CPU) & \cmark \\
      & Nunez-Yanez~and~Lore & Regression & Selection & 95\% & \xmark & \xmark & ARM Cortex-A9 (CPU) & \cmark \\
      & Walker et al. & Regression & Selection & 96.2--97.2\% & \cmark & \cmark & ARM Cortex-A15, Cortex-A7 (CPU) & \cmark \\\hline
    \end{tabularx}
    \caption[Comparison of different computations energy models]{Comparison of different computations energy models. The model is either an analytical expression or a regression. The energy optimization technique is the selection of some architectural parameters, of computations configurations. Scaling is split into DVS and dynamic frequency scaling DFS. (\cmark) scaling is used only in the model, not in the optimization technique. [\cmark] values are changed statically (or manually where appropriate such as in Marowka).}
    \label{tab:energy-models}
\end{sidewaystable}

\subsection{Heterogeneous elements modeling}
\label{sec:soa-ene-hete}

Modern computing hardware energy modeling and optimization techniques often deal with the heterogeneous computing elements altogether using statistical tools. Such tools are inexpensive to deploy and relatively accurate in predicting future computations energy consumption~\citep{bailey2014adaptive}. Although there are further optimizations available by looking at the elements (CPUs, GPUs) separately, these are often application and hardware-dependent. Instead, we focus on a generic computations energy model that can be used independently of the hardware and computations under analysis. 

A model for heterogeneous elements is derived by Marowka~\citep{marowka2017energy}. The model is based on some power metrics: the scaled speedup, scaled performance per watt, and scaled performance per joule. The approach increases energy efficiency by choosing the configuration of the heterogeneous components--for instance, by enabling computations only on CPU cores--and hence, investigates the impact of different architectural choices on energy efficiency. In particular, the model is used to analyze the energy of three processing schemes: symmetric, asymmetric, and simultaneous. The former uses merely a multicore CPU. Asymmetric processing scheme both CPU and GPU. The software benchmark on this scheme consists of running a program on one of the computing elements at a time. The latter processing scheme is similar to the previous, but the software benchmark runs on CPU and GPU simultaneously. Our work extends the model and builds a computations model to the simultaneous processing scheme.

A more sophisticated statistical model relies on multivariate linear regression for heterogeneous elements and is derived by Bailey~et~al.~\citep{bailey2014adaptive}. The model eases the selection of the application's configuration that maximizes performance under given power constraints. It is trained offline with a small set of benchmarks and works across multiple devices. The overall flow of the proposed approach is composed of two stages. The first stage is the offline training stage. The stage utilizes a small training set of benchmarks split into clusters. The model is built then with a regression per each cluster. After this stage, follows the online predicting stage. The latter uses the model to predict the power and performance of a large set of applications (opposed to the relatively small number of benchmarks in the offline stage). Our work similarly models a subset of samples and infers properties of the entire search space. However, our work focuses on mobile computing hardware that we use for aerial robots.

A resource model for heterogeneous mobile devices developed by Goraczko~et~al.~\citep{goraczko2008energy} considers both the time and power of a given run-time mode (Goraczko~et~al. use the term mode rather than configuration used by Marowka and Bailey~et~al.). Goraczko~et~al. use a CPU and a microcontroller as a heterogeneous platform opposed to GPU in the past approaches in this section. Energy-wise, the resource model uses DVS as some other models in \fref{sec:soa-cpu}{Section} but accounts for heterogeneous elements. The approach models multiple processors with a state machine then used to derive a software partitioning problem--the problem of deriving the optimal mode. The problem is solved with an optimization technique: integer linear programming (ILP)\findex{integer linear programming}. The optimization occurs over an energy cost and with given deadline constraints. The intuition of formally defining the problem of deriving the optimal mode is similar in our work, which we expanded further by merging the path in our dynamic energy planning.

A holistic approach for heterogeneous elements energy efficiency  is proposed by Ma~et~al.~\citep{ma2012holistic}. The approach achieves energy efficiency by splitting and distributing the workload among the heterogeneous elements. Ma~et~al. then use frequency scaling for the CPU and GPU, and \Gls{acr:dvs} for the CPU. GPU-side, the frequency is determined with a lightweight machine learning algorithm. Energy in this approach is analyzed by empirical means, using two power meters. The testbed under analysis--NVIDIA GeForce GPUs and AMD Phenom II CPUs--does not include built-in power monitors, and overall, Ma~et~al. do not consider mobile computing heterogeneous hardware or derive a model for the energy. Nevertheless, the approach is of interest for energy implications of heterogeneous elements.

Recently, approaches are emerging to model the energy consumption of machine learning algorithms.
Some computations-specific modeling approaches have been developed in this context by Yang~et~al.~\citep{yang2017method}, and more recently surveyed by Garc{'\i}a-Mart{'\i}n~et~al.~\citep{garcia2019estimation}. The latter is a literature review motivated by the lack of appropriate tools to build and measure power models in existing machine learning suites. Garc{'\i}a-Mart{'\i}n~et~al. describe the state of the art of energy estimation for convolutional neural networks (\Gls{acr:cnn}s) and data mining\findex{data mining}. Yang~et~al. evaluate an energy model of deep neural networks (\Gls{acr:dnn}s)\findex{deep neural network} based on a network bitwidth, sparsity, and architecture. The methodology applies exclusively to DNNs, but has been extended and used with CNNs~\citep{yang2017designing} in an optimization loop to reduce the computations energy consumption. A survey to optimize and evaluate neural networks on some of the embedded platforms that we use in this work (NVIDIA Jetson TK1 and TX2) specifically is proposed in~\citep{mittal2019survey}. 

A review of operating system level energy management techniques for heterogeneous element of computing hardware is carried by Kim~et~al.~\citep{kim2018survey}. Although Kim~et~al. do not deal with energy models, they list energy management techniques such as power-saving schedule that we utilize to dynamically optimize the energy resource of the aerial robots. They also detail aspects such as Quality of Service (QoS)\findex{quality of service} that we use to define execution boundaries for the computations. 

Our initial approach~\citep{seewald2019hlpgpu} relied on external meters rather than internal power monitors. A similar technique has been developed by Calore~et~al.~\citep{calore2015energy} to measure the energy efficiency of HPC systems. In both ours and Calore~et~al. approaches, the methodology is tested on the NVIDIA Jetson TK1 computing hardware that does not include built-in power monitors as opposed to other computing hardware that we analyze.

\subsection{GPU features modeling}

GPUs are used in several applications due to their high computational resources~\citep{kasichayanula2012power}, which come at a price of increasing energy demands~\citep{mittal2014survey}. It is hence unsurprising that for computations energy modeling, GPUs have their own modeling approaches. Here we discuss some of the approaches of interest to our work. Extensive reviews of the available methodologies are proposed by Mittal~and~Vetter~\citep{mittal2014survey} and by Bridges et al.~\citep{bridges2016understanding} but are not tailored to mobile computing hardware.

An energy model that analyzes GPU features is derived by Hong~and~Kim~\citep{hong2010integrated}. The contribution consists of an integrated power and performance prediction model to derive the optimal number of active cores for a given application to achieve energy savings~\citep{hong2010integrated}. The model is GPU specific: it consist of an analytical expression which estimates the GPU power and time in function of some parameters. Opposite to our work, it does not model the energy of the entire platform nor is deployed on mobile computing hardware. Nevertheless, it achieves high accuracy in terms of GPU power and time prediction.

A similar focus on GPU features is proposed by Wu~et~al.~\citep{wu2015gpgpu}. The approach uses machine learning techniques to evaluate the performance and estimate the power from real GPU hardware. In particular, Wu et al. trains a neural network with different performance counters for various GPU configurations of a collection of applications, and derive the optimal values of these counters. The data gathered from one hardware are used to estimate the power and performance for multiple other GPU hardware. Like the approaches in~\fref{sec:soa-ene-hete}{Section}, the approach is computation-independent and requires no source code analysis. Moreover, machine learning is an energy-expensive computation itself~\citep{garcia2019estimation,yang2017method}, thus deterring similar approaches in our planning where we aim to preserve the energy as far as possible.

An empirical approach for energy evaluations of GPUs during various computations in the CUDA\findex{CUDA} environment is proposed by Collange~et~al.~\citep{collange2009power}. The approach measures and analyzes how computations impact instantaneous energy consumption. It observes a significant energy impact of memory accesses and generally analyzes the energy cost of parallel GPU computations. The work by Collange~et~al. thus aims to derive the optimal memory configuration of a given benchmark. However, it does not use the measured data to calibrate a model for energy estimation, nor focus on mobile computing devices.

Contrary to the previous approach of pure empirical measurements, Luo~and~Suda\citep{luo2011performance} proposes an analytical model for energy and performance estimation of GPUs. The model contains execution time and energy consumption prediction sub-models, where the latter follows from the former. The final analytical model for the energy estimation multiplies the execution time and the estimated power derived using an analytical expression. The work derives some observations on energy implication of a given benchmark, which is then not used nor hypothesized in any energy adaptation technique. The accuracy analysis, redefined by the authors with another analytical expression, shows a strong correlation between observation and the analytical model. We also derive an analytical expression. We further motivate such expression with empirical observation of energy data and employ a multivariate linear regression. We then focus on heterogeneous elements and mobile computing hardware.

A model based on a performance-per-watt metric for GPUs is proposed by Leng~et~al.~\citep{leng2013gpuwattch}. Developed for general-purpose GPU (GPGPU)\findex{genral purpose GPU} powered devices, it is composed of multiple stages. An initial model is validated with some empirical measurements and eventually refined.  The contribution suggests an integrated power and performance modeling framework, which inputs a configuration to define micro-architectural and component parameters. It is then used in a feedback-driven optimization loop with the GPGPU. In our approach, we similarly input a configuration to the model but we specifies the computing hardware's computations rather then architectural parameters. We use the output of the model in an optimization loop but extend this latter stage together with the path. Computation-wise, we use both heterogeneous elements.

\subsection{CPU features modeling}
\label{sec:soa-cpu}

Numerous other contributions model the CPU energy specifically and investigate how to lower the power~\citep{hong1999power, luo2001battery, chowdhury2005static} by some system-level modeling and optimization techniques including DVS, multiple asymmetric cores (such as the ARM big.LITTLE architecture), and power gating~\citep{walker2017accurate}. They usually incorporate information about configuration parameters into the scheduler~\citep{seewald2019coarse} and focus on homogeneous opposite to heterogeneous systems in our work. 

A model for microprocessors based on regression is proposed by Lee~and~Brooks~\citep{lee2006statistically,lee2006accurate}. The model is built with a small number of samples of both the power and performance in a joint architecture-computations search space. Lee~and~Brooks provide extensive coverage of regression modeling and use the same model specification for power and performance. The entire search space is sampled uniformly at random, an approach that allows identifying trends and trade-offs between the parameters~\citep{lee2006accurate}. The results show high accuracy even with a relatively small number of samples. We likewise use a regression model in our computations energy modeling approach but cover all the heterogeneous elements. Nonetheless, Lee and Brooks' approach is of interest to evaluate the accuracy of regression techniques and distributions of samples. Depending on the configuration space we sample the computations uniformly using a linear or exponential distribution of samples whereas Lee~and~Brooks samples architectural parameters. We specify the sampling distance in a configuration file. 

Statistical multicore CPU\findex{multicore CPU} power models are presented by Takouna~et~al.~\citep{takouna2011accurate}. These models are based on the average running frequency and the number of active cores. Commonly to other computations energy models, they use multivariate linear regression. Although insightful in terms of multicore CPU power models, the approach does not model GPUs nor heterogeneous elements. Moreover, it is tailored on virtualized serves, opposed to mobile computing hardware that we focus on in this work. Moreover, Takouna~et~al. do not consider computations configurations in the regression, but a variable selection of architectural parameters. 

An empirical CPU power model is presented by Reddy~et~al.~\citep{reddy2017empirical}. The model uses measured data and simulates the energy consumption of a quad-core ARM Cortex-A15 and gem5\findex{gem5}, a full-system architectural performance simulator. To collect the measurements, the model uses built-in power monitors in the ODROID-XU3 platform and evaluates the model against sixty workloads reporting high accuracy (the average error between estimated and real power is less than six percent). Our model shares compatibility with the ODROID-XU3 platform but is not simulator-dependent. It further models heterogeneous computing hardware such as NVIDIA Jetson TK1, TX2, and Nano platforms. 
 
Other models for mobile computing hardware based on the ODROID-XU3 platform are developed by Nunez-Yanez~and~Lore~\citep{nunez2013enabling} and by Nikov~et~al.~\citep{nikov2015evaluation}. These models use hardware event registers and capture the state of the CPU under a representative workload. They have three modeling stages: data collection of a benchmark running on the platform occurs in the first stage. The second and third stages are performed offline on a different architecture. They process the collected data (in the second stage) and generate the model (in the third stage)~\citep{seewald2019coarse}. In~\citep{nikov2015evaluation}, the model deals with ARM big.LITTLE architecture. We use these models to evaluate the performance of our computations energy modeling.

A run-time model that uses performance monitoring counters (PMCs)\findex{performance monitoring counters} for mobile computing hardware is proposed by Walker~et~al.~\citep{walker2017accurate}. The approach is implemented on mobile CPUs such as ARM Cortex-A7 and Cortex-A15 and can be implemented on other CPUs. Likewise in~\citep{reddy2017empirical}, the model can be used with the architectural performance simulator gem5, and likewise in~\citep{nunez2013enabling,nikov2015evaluation,reddy2017empirical}, it is implemented on the ODROID-XU3 platform. The approach builds a linear regression for a given experiment for CPU power prediction. Although it considers CPU-powered computing hardware only, it is insightful in terms of proposed statistical rigor in building run-time CPU power models.


%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Battery Modeling}
\label{sec:soa-ene-bat}

In this section, we describe some battery modeling approaches and focus on battery models that we can use with both the computing hardware and the aerial robot. There are several models for this purpose, each with its advantages and disadvantages. The state of the art in battery modeling is surveyed by Rao~et~al.~\citep{rao2003battery}.
Physical models use ordinary and partial differential equations to accurately predict the battery evolution in time~\citep{rao2003battery}. These models come at a considerable time and computational cost~\citep{doyle1993modeling,marcicki2013design,lotfi2017reduced,moura2017battery}. Nevertheless, some hybrid models with less computational complexity have emerged as well~\citep{kim2011hybrid,kim2019enhanced}. Empirical models model the battery out of a set of empirical trials~\citep{syracuse1997statistical,pedram1999design}, in a similar way as many computations energy models in \fref{sec:soa-ene-mod}{Section}. They have a relatively low analytical insight~\citep{rao2003battery}, opposed to mixed models that derive some parameters from analytical expressions and experimental data~\citep{rao2003battery,rakhmatov2001analytical}. Abstract methodologies use techniques such as the time evolution of an equivalent electrical circuit~\citep{gold1997pspice,benini2001discrete,seongjun2008state,xiaosong2012comparative,xing2014state,hasan2018exogenous} similarly to hybrid models~\citep{kim2011hybrid} but with less computational complexity. They have compelling trade-offs in terms of analytical insight, accuracy, and complexity~\citep{rao2003battery} and are the models of our choice for battery modeling.

Abstract models with an equivalent electrical circuit are presented by Xing~et~al.~\citep{xing2014state} and Hasan~et~al.~\citep{hasan2018exogenous}. These models model the battery state of charge (SoC) with the evolution in time of a differential model of an equivalent circuit. The first model~\citep{xing2014state} utilizes an unscented Kalman filter to tune some parameters at each sampling step. the SoC is then estimated in the second model~\citep{hasan2018exogenous} utilizing an eXogenous Kalman filter~\citep{johansen2017exogenous}. We use the model from Hasan~et~al. for the battery modeling. We derive an equivalent circuit for a Li-ion\findex{Li-ion battery} aerial robot battery and evaluate the SoC over time with an equivalent differential equation to the one proposed in~\citep{hasan2018exogenous}. 

A battery model for computing hardware specifically is proposed by Rao~et~al.~\citep{rao2005battery}. The approach consists of an abstract stochastic model\findex{stochastic battery model} that uses Markov processes\findex{Markov processes} with probabilities related to the physical characteristics of the battery~\citep{panigrahi2001battery}. Rao~et~al. improve further the accuracy of the model including some physical battery characteristics. The approach is useful in terms of evaluating models for computing hardware. Indeed our approach relies similarly on an abstract model~\citep{hasan2018exogenous}, whereas we focus on models based on an equivalent electrical circuit which requires less battery-specific knowledge for modeling. We can then model the SoC with little information regarding what battery is mounted on the aerial robot. 

A modeling technique for smartphones is proposed by Zhang~et~al.~\citep{zhang2010accurate}. The approach consists of an automated modeling technique that uses knowledge of battery discharge behavior and battery voltage sensors. The technique models the power using a multivariate regression (similarly to our approach and many computations energy models in \fref{sec:soa-ene-mod}{Section}) and the battery using an equivalent circuit. Although the analysis is limited to smartphones, it is insightful in terms of automated modeling techniques for computing hardware. We have similarly derived an automated modeling technique for computations, battery, and entire system model that we integrate into our dynamic energy planning for aerial robots.

A battery model for the low-power design of computing hardware is presented by Benini~et~al.~\citep{benini2001discrete}. The model is also derived from an equivalent circuit but is discrete-time and intended for system-level design environments. Although specific to this latter application, it evaluates different battery types: a first Li-ion implementation of the model is extended to various battery types with both non and rechargeable cells. 


%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Motion Planning}
\label{sec:soa-motion-pl}

Planning algorithms for mobile robots include broad and diverse topics. Energy-wise, the algorithms select an energy-optimized trajectory~\cite{mei2004energy}, e.g., by maximizing the operational time~\cite{wahab2015energy}. However, many studies apply to a limited number of robots~\cite{kim2005energy} and focus exclusively on planning the trajectory~\cite{kim2008minimum}, despite compelling evidence for the energy consumption also being significantly influenced by computations~\cite{mei2005case}. 
In the remainder of this chapter and before discussing the studies in mobile robotics that deal with computations and motion energy, we detail planning in the literature. 
We are interested in planning both these aspects: the path and the computations. We further recall that we are specifically interested in coverage planning of a given space in an energy efficient way. We discuss the available literature on coverage planning for mobile robots later in this section and emphasize relevant studies for aerial robots in \fref{sec:cov-plan-aero}{Section}. There are several approaches in this sub-topic of motion planning~\citep{choset2001coverage,cabreira2019survey}, including studies that derive an energy efficient cover~\citep{wei2018coverage,cabreira2018energy}. In \fref{sec:opti-cov}{Section} we discuss these studies and focus on previous methodologies for the optimality of the cover. 

Within simple motion planning opposed to the derivation of a cover, Mei~et~al. propose an energy-efficient motion planning for mobile robots distinguishing the two major energy consumers--the computations and motion energy. In~\citep{mei2004energy} focus on optimizing the motion energy, although they analyzed the computations energy in a later iteration of their work~\citep{mei2005case} (we discuss this latter study in \fref{sec:soa-comp-motion-pl}{Section}). Their motion plan is composed of a path plan and a velocity schedule; the path plan is similar to the our plan in \fref{def:plan}{Definition}, whereas the velocity schedule contains velocities, accelerations, and decelerations along the route. Mei~et~al. then analyze the most energy efficient path plan and velocity schedule. The major contributions spans from analyzing the energy cost of a plan along the energy of turns and accelerations, the analysis of travelled against motors velocities, to experimental evaluations. We have likewise optimized the coverage plan in \fref{sec:path-wise}{Section} compared to traditional coverage planning using e.g., boustrophedon decomposition\findex{boustrophedon decomposition}~\citep{lavalle2006planning}. We do not consider a velocity schedule in our dynamic planning due to the physical constraints of airborne systems. Nevertheless our approach is optimized against sudden accelerations. Indeed one of the observation Mei~et~al. underline is the energy cost of turns; to this end our algorithm minimizes the number of turns in  the coverage. Recall the plan in \fref{fig:plot3}{Figure} requires sudden decelerations opposed to the plan in \fref{fig:plot4}{Figure} specifically optimized for fixed-wing crafts.
The study uses Palm Pilot Robot Kit as experimental setup with polyurethane omnidirectional wheels\findex{omnidirectional wheels} and three MS492MH DC servo motors. Mei~et~al. use external power monitors to measure the power drain of the systems and 9 V along four 1.5 V batteries for the control circuit and motors respectively. They measure the energy efficiency in terms of squared meters over jouls and report an improvement of 50\% by using an energy optimized path plan. 
Mei~et~al. study has encouraged our initial analysis in dynamic planning in many respects: Mei~et~al. are the first energy efficiency study we found that analyzed motion and computations energy, that analyze plan variations energy-wise, and that distinguish explicitly the need to account for computations energy~\citep{mei2005case}. However, Mei~et~al. lack in further analysis of energy efficiency in path variations. Indeed they focus on straight lines, spirals, and the energy cost of turns rather whereas we focus on a generic variation in path within given limits. They do not address explicitly computations and motion planning but propose foundations for future studies.

Dressler and Fuchs undertake a different approach to energy efficient motion planning. In their work~\citep{dressler2005energy} they focus on energy modeling of motion plans for given tasks (the term is not to be confused with computational tasks), where e.g., the mobile robot has to reach a location in space and take an image. Dressler and Fuchs propose a future planning direction based on energy control and battery management to allocate the tasks in an energy efficient way. The study models energy-consuming parts of the robot with some corresponding characteristic curves and it is hypothesized to a scenario for exploration and supervision of unknown surroundings. Dressler and Fuchs observe a linearly approximable of the SoC for some sub-tasks of a given task such as movement and wireless communication. The study lays basic for future analysis on the topic but does not investigate further dynamic planning for mobile robots. Although we don't model the energy of a given task, we similarly formulate the plan as a set of paths and computations in \fref{def:plan}{Definition} of which we derive the optimal configuration energy wise. Although preliminary, the study has inadvertently introduced the differentiation between computations and motion energy components that we have built upon. The reported sub-tasks energy models are indeed relative to one or another of the two components. The wireless communication is relative to a computation that transfer data airborne, the movement to a path to reach the location. Dressler and Fuchs have further developed the approach, however, focused on sensor networks~\citep{fuchs2006distributed,dressler2006lifetime}

The majority of other contributions in the literature focus on optimizing motion planning to increase power efficiency. There are several studies that survey the available literature for mobile robots' planning, along some textbooks~\citep{choset2005principles,lavalle2006planning}. Notably, La~Valle's textbook~\citep{lavalle2006planning} groups planning algorithms literature and focus on robot motion planning. Juli\'{a}~et~al. propose an extensive study of the most important methods for motion planning for autonomous exploration and mapping of unknown environments. The survey presents different techniques and classifies them for the level of multi-robot coordination and integration with simultaneous localization and mapping (SLAM) algorithm. 


\subsection{Coverage path planning}

In autonomous mobile robots scenarios it is often required to explore every location in a given elemental region~\citep{cao1988region}; this latter problem is defined in the literature as coverage path planning (CPP)\findex{coverage path planning} problem.
In this section we discuss briefly some surveys that deal with CPP in mobile robotics generically, while we discuss in detail approaches that involve aerial robots in this latter sub-topic in \fref{sec:cov-plan-aero}{Section}. In our work, we are dealing with this problem when we cover a given agricultural area in \fref{pb}{Problem}. 
% I am the next par Adam. maybe move me in intro or pb?

The problem is related to the covering salesman problem\findex{covering salesman problem}, a variation of the famous travelling salesman problem (TSP)\findex{travelling salesman problem} where the salesman visits a neighborhood of each city minimizing the travel length~\citep{arkin1994approximation}, except that the salesman must pass over all points rather the through all the neighborhoods~\citep{choset2001coverage}. This problem is referred to also as lawnmower problem~\citep{galceran2013survey}, and is proven to be NP-hard~\citep{arkin2000approximation}. Early studies to solve the problem use heuristic with no guarantee on the coverage~\citep{choset2001coverage}. For instance, Arkin and Hassin propose simple heuristic-based algorithms for constructing the tours~\citep{arkin1994approximation}. There have emerged a variety of approaches ever since. Arkin appears in other studies that extend the work and propose a continuous version for the covering salesman problem algorithm~\citep{arkin1993lawnmower,fekete1994lawnmower,arkin2000approximation} that solves the problem with lawn moving and milling algorithms~\citep{arkin2000approximation}. To ensure a guarantee on the coverage, many approaches either implicitly or explicitly use cellular decomposition (exact or approximate), where the space to cover is decomposed into cells; the overall solution to the coverage planning problem is then the union of the solutions of the cells~\citep{choset2001coverage}. 

To cover each cell in a cellular decomposition, the robot can use simple back and forth motion parallel to the cell's boundaries--often referred to as boustrophedon motion\findex{boustrophedon motion}~\citep{lavalle2006planning}--and the coverage planning is reduced to motion planning between the cells~\citep{choset2001coverage}. Often, the cells are decomposed into trapezoids which yields to a popular class of solutions under the name of boustrophedon decomposition--since they are related to the boustrophedon motion; the origin cell is split in the eventuality the algorithm finds an obstacle (encounters a change in connectivity)~\citep{choset2000exact}. Choset~et~al. propose exact cellular decomposition method~\citep{choset1998coverage} that they complement with different motions in a latter instance of their work~\citep{choset2000exact} (they consider e.g., spirals, spikes, and diamond patterns and other interesting decompositions). Within the cellular decomposition algorithms, some approaches~\citep{choset2000exact,acar2002morse} works with the concept of Morse function to indicate the location of cell boundaries. We show how does the boustrophedon decomposition proposed in Choset~et~al. work in \fref{}{Figure}. Grid decomposition is another way of solving the coverage in the literature~\citep{zelinsky1993planning,gabriely2002spiral,shnaps2016online,wei2018coverage} where the space is divided into equally sized cells. Other approaches are based of graphs~\citep{cheng2019graph} or derive an optimal coverage~\citep{huang2001optimal,xu2011optimal,lee2011smooth,li2011coverage,wei2018coverage}. The choice of approach depends on the practical application~\citep{wei2018coverage}. The optimal coverage approaches are often a variation of known studies but with a cost that has to be optimized~\citep{galceran2013survey}. Our work fits into these latter class of approaches. In the remainder of this section, we discuss two surveys that deal with coverage planning and further detail relevant studies on optimal coverage. We further detail approaches for CPP with aerial robots in detail in \fref{sec:cov-plan-aero}{Section} and discuss how our work fits into the context of the available literature.

%todo: there is some text on boustrophedon decomposition in Choset. Put it into the context here with the other survey. It fits nicely. Then you can have Zamboni in aerial coverage path planning instead!

Choset propose a survey~\citep{choset2001coverage} of studies on coverage for robotics specifically rather that generic motion planning. The survey classifies the studies according to the decomposition algorithm; the classification includes heuristic, and cellular decomposition based (these are approximate, partial-approximate, or exact cellular decompositions). Choset report that many methods for coverage planning with some guarantee in terms of either optimality or completeness are based on cellular decomposition--a geometric structure to represent the robots' free space. The methods decompose than the free space in sub-regions, which are easy to cover~\citep{galceran2013survey}. It is then enough to visit each one of these sub-regions~\citep{galceran2013survey}. Grid based methods in Galceran and Carreras's survey that we discuss in the following paragraph correspond to approximate cellular decomposition methods. 

More recently, Galceran~and~Carreras propose a survey~\citep{galceran2013survey} of the different approaches for coverage path planning. The survey classify the algorithms among the others in online and offline classes where the former rely on stationary information under a known environment and the latter on sensor measurements to sweep the space~\citep{galceran2013survey} . Notably, Galceran and Carreras report that most coverage planning algorithms\findex{coverage planning algorithms}  decompose the space in sub-regions called cells to achieve coverage. The survey is extensive in terms of reviewed literature; it compromise studies focusing on cellular decomposition, cellular decomposition base on critical points of Morse functions\findex{Morse functions} (the latter can deal with generalized obstacles), graph (such as roads and streets networks), and grid algorithms. The work further surveys approaches based on detection of natural landmarks, approaches for robot with contact sensors, and operating in rectilinear environments; approaches for 3D environments, optimal coverage, for multiple robots, and based on reduction of localization error.

\subsection{Optimal coverage}

Huang analyzes an optimal coverage methodology based on the cellular decomposition into subregion. The study~\citep{huang2001optimal} emphasizes the cost of performing a turn and seek for a boustrophedon-like motion--Huang utilize round turns similarly to the intuitive plan in \fref{fig:plot3}{Figure}--that minimizes the number of turns. To this end, Huang minimizes the sum of sub-region altitudes--a metrics related to the sweep direction of a sub-region. We illustrate the principle in \fref{}{Figure}, where one sweeping direction produced a considerably different number of turns opposed to the other. Huang proposed the methodology for both convex and non-convex shapes and propose a dynamic programming to find the sweep direction in the optimal coverage. The approach performs better to other approaches by considering possible different sweep direction for different sub-regions. The study is insightful in terms of analyzing the coverage optimality of different direction in a boustrophedon-like motion. We similarly try to optimize the turns in our dynamic planning. 

% While we will of- ten speak of the problem as "milling" with a "cutter," many of its important applications arise in various con- texts outside of machining. \citep{arkin2001optimal}

Arkin~et~al. have focused~\citep{arkin2001optimal,arkin2005optimal} on optimal coverage and have similarly to Huang considered the length of the tour along the number of turns. Both Arkin~et~al. and Huang indeed remark that in many routing problems, the cost is dominated by turns where the robot might have to slow~\citep{arkin2001optimal}.  Arkin~et~al. studies are insightful in terms of algorithmic rigour. They indeed prove that coverage planning with turn costs in NP-complete even with objective being merely minimizing the turns and propose various approximation algorithms to compute nearly optimal covering tours. Nevertheless, the two studies and the study proposed by Huang are inconclusive in terms of nonholonomic robot constraints: they do not consider aspects such as the radius of the turn for the optimal coverage. They also do not consider the eventuality of replanning in case external interferences affect the feasibility of the original plan. The latter scenario can happen in the eventuality of an aerial robot suffering a sudden battery drop while on a given optimal tour. 

% We are obliged to Valentin Polishchuk for a very thoroughlist of suggestions, and thank three anonymous referees for various comments thathelped to improve the presentation of the paper.  We thank Regina Estkowski forhelpful discussions.

Shnaps and Rimon propose a solution to this latter problem and focus to robotics scenarios explicitly. In the study~\citep{shnaps2016online}, a robot has to cover an unknown environment with a strict battery constraint. Starting from a given point, the robot equipped with position and obstacles sensors navigates the environment and eventually covers the entire space. In a battery discharge event, the robot returns to the starting point to recharge the battery. Shnaps and Rimon propose battery powered coverage algorithm for the task and model the energy cost with the path length. The proposed algorithm divides the space to cover into equally sized cells in a grid. Although insightful in terms of coverage planning for battery powered robots, the approach does not account for aerial robots. Indeed in this latter class the robots would require to land to recharge or replace the battery. Wei~and~Isler consider also the eventuality of strict energy constraints for mobile robots and revisit Shnaps and Rimon's approach.In the study~\citep{wei2018coverage}, they propose an algorithm for robots restricted to axis-parallel motion generalized to arbitrary polygons. Alike in Shaps and Rimon's approach~\citep{shnaps2016online}, they divide the space into equally sizes cells in a grid. The approach is tested on aerial robots, but is limited to rotrary-wing crafts and generally unsuitable for nonholonomic robot constraints. In both Shnaps and Rimons's and Wei~and~Isler's approaches, the energy optimality is considered within CPP rather than and intergrated dynamic planning and scheduling approach in our work.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Planning for Autonomous Aerial Robots}
\label{sec:soa-aerial-pl}

Many other studies for energy efficiency of aerial robots limit to energy optimal motion planning~\citep{wang2017curvature,morbidi2016minimum,kreciglowa2017energy}. They do not consider coverage planning nor considers distrubances. Kreciglowa~et~al. focus on the best trajectory between two howevering configurations in terms of energy efficiency~\citep{kreciglowa2017energy}. Morbidi~et~al. generates energy optimal paths solving optimal control problems (\Gls{acr:ocp}s) to obtaint the angular accelerations of four electrical motors of a quadrotor rotary-wing aerial robot~\citep{morbidi2016minimum}.
%FROM THE BELOW STUDY; INTERESTING: There are two main categories of UAVs: fixed-wing aircraft and multi-rotor vehicles. Compared with multi-rotor vehicles, fixed-wing aircraft are more advanced in many respects: they tend to be more stable in the air in the face of both piloting and technical errors as they have natural gliding capabilities even without power, and they are able to travel longer distances on less power. More importantly, they have the advantages of being able to fly at high speeds for a long time using a simpler structure. These characteristics make fixed-wing vehicles still widely popular, despite requiring a runway or launcher for takeoff and being unable to hover. For these reasons, we consider the path planning problem for fixed-wing UAVs in this work.
Wang et al. propose a study~\citep{wang2017curvature} of motion planning applied to fixed-wing aerial robot. The approach pass through a set of waypoints by sattisfying a given constraint on curvature.

Popovi\'{c}~et~al. propose an interseting study~\citep{popovic2017online} for planning and subsequent replanning to satisfy dynamic constraints. The study addresses the environment disturbances and sensors uncertainty using a high-dependent noise model and accounts for a limited time bidget. Popovi\'{c}~et~al. plan path online using a combination of evoluationary optimization\findex{evolutionary optimization} and global viewpoint selection and validates the approach using a precision agriculture scenario of detecting weeds. Although the study has similarities with our scenario, it does not account for different aerial robots, nor perfom a dynamic energy replanning (of both the path and computations) in function of battery state. Furthermore, the scenario under analysis does not require a complete coverage opposed making it unsuitable for some applications we consider such as hazard detection. Hayat~et~al. propose an approach~\citep{hayat2017multi} that is similarly based on an evolutionary optimization in terms of multiple aerial robots planning of tasks and paths (the notion of task refers a specific action to be performed) for a search and rescue scenario. The approach share same limitations with Popovi\'{c}~et~al.  

\subsection{Aerial coverage path planning}
\label{sec:cov-plan-aero}

In the context of aerial robots, the survey~\citep{galceran2013survey} proposed Galceran~and~Carreras that we discussed in \fref{sec:soa-motion-pl}{Section} focus on optimal coverage~\citep{xu2011optimal} and multi-robot coverage~\citep{ahmadzadeh2008optimization,maza2007multiple,barrientos2011aerial,araujo2013multiple}. Our work come into the intersection of optimal coverage and coverage performed using aerial robots. Indeed in our coverage planning we dynamically refine a plan to achieve optimal behavior energy-wise.

Cabreira~et~al. propose a survey~\citep{cabreira2019survey} that covers CPP exclusively for aerial robots. The study classifies the algorithms using the classification introduced by Choset~\citep{choset2001coverage} from \fref{sec:soa-motion-pl}{Section} of the cellular decomposition technique employed. Within the same section, Galceran and Carreras~\citep{galceran2013survey}--that also employed the classification of the cellular decomposition technique--share with this survey the classification regarding the approach for coverage planning that can be either online or offline. The survey further focus on the shape of the coverage area and reports the performance metrics such as the path length, coverage time, and number of turning maneuvers, among the others. THe survey focuses on single and cooperative strategies for exact cellular decomposition, and on strategies based on full and partial information from approximate cellular decomposition. Markably, they survey studies based on genetic algorithms\findex{genetic algorithm} and ant colony optimization\findex{colony optimization}, and focus on different covering strategies including Zamboni\findex{Zamboni motion} similar to the fixed-wing plan in \fref{fig:plot4}{Figure}.
Ara\'{u}jo~et~al. also analize covering strrategies~\citep{araujo2013multiple} for a given cell of interest. They describe the boustrophedon (that appears under the name ``lawnmower'') and Zamboni motion discussed in this work and additional spiral, spiral-like, dubins path, modified boustrophedon and Zamboni.

While CPP under uncertainty for aerial robots appears in Cabreira~et~al.'s survey, there are two surveys~\citep{goerzen2010survey,dadkhah2012survey} with Mettler that review approaches dealing with uncertainty in general terms of aerial robotos motion planning. 
The former survey~\citep{goerzen2010survey} emphatize a classification based on differential constraints, and groups the motion planning algorithm to these with and without differential dynamics. The survey observes a lack in approaches that deal with uncertainty; indeed, the latter survey~\citep{dadkhah2012survey} analyze such approaches specifically. The survey groups the motion planning approaches by the class of uncertainty they address. For instance, in case of uncertainty in vehicles' dynamics, the survey propose studies based on optimal control and artificial intelligence, and in case of environment knowledge uncertainty, studies based on mapping, due to atmospheric conditions, or sensors noise. 

% In  a  survey  mission,  a  key  task  of  the  flight  planner  is  to  generate the UAVs path to completely cover the area of interest efficiently, and it is tackled with coverage path planning (CPP) 
Nam~et~al. propose an approach~\citep{nam2016approach} for CPP for aerial robots, that generates the covering tour offline flight. The approach use a grid decomposition method, and the grids are visited using a wavefront algorithm i.e., a specialized version of Dijkstra's algorithm that oprimizes the number of stages to reach the goal~\citep{lavalle2006planning}. Using the wavefront algorithm\findex{wavefront algorithm} they generate the optimal path between given points in space but do not focus further on optimal criteria, indeed the practical analysis shows the result not being optimized for e.g., number of turns. Furthermore the approach focus on rotary-wing UAVs and the planning happens prior to the flight, it does not account for energy (motion nor computations) explicitly, nor deal with the eventuality of replanning in the eventuality an unexpected event occurs.


Sadat~et~al. propose and interesting approach~\citep{sadat2014recursive} for non uniformly shaped areas distributed into clusters. The approach performs adaptive coverage depending on the distributions of the regions of interest in the space. Sadat~et~al. use coverage trees for the purpose (a structure where the child nodes cover exactly the same area as the parents but with higher resolution), and propose different strategies to visit the tree (breadth-frst\findex{breadth-first strategy}, depth-first\findex{depth-first strategy}, and shortcut heuristic\findex{shortcut heuristic}). Although interesting in terms of defining the covering area in a sparse way, the approach does not account for the aerial robot's battery nor discuss other aerial robots than the rotary-wings.

\subsection{Optimal aerial coverage}
\label{sec:opti-cov}

Di~Franco~and~Buttazzo propose an energy-aware CPP for aerial robots. The study~\citep{difranco2015energy} focus on energy and other requirements, such as coverage and resolution.  The model is generic for a given drone and outputs the energy consumption as a function of velocity and operating conditions by means of an interpolating curve of the power measurements. In particular, for future energy predictions Di~Franco and Buttazzo derive an energy model from real measurements flying the drone in several scenarios (during maximum acceleration and deceleration, horizontal flight, climbing, descending, hovering, and turns). Thus the study considers different analytical expressions derived from the interpolations for the scenarios. The study considers a search area that forms a polygon surveyed with the boustrophedon decomposition similarly to \fref{fig:plot3}{Figure} but with sharp turns. Di~France and Buttazzo consider the quality of the coverage by e.g., varying the distance between the survey lines in case the total energy derived from the model is lower than the available energy in an extension~\citep{difranco2016coverage} to the original study~\citep{difranco2015energy}, however, they do not plan this aspect in flight, nor focus on other aspects of the aerial robot flying (such as the quality of the computations being executed). Moreover, the energy model is plan specific; indeed different paths have different analytical expression for the future energy opposed to our model in \fref{sec:periodic-model}{Section} that is generic once trained with enough measurements for a given plan variation. The study is nevertheless useful in terms of defining the energy cost of a given coverage, and insights into how the variations in the survey quality affects the power consumption. The study focuses on IRIS rotary wing aerial robot (it has four 850 Kv motors), a GoPro camera mounted on a Gimbal stabilizer, and a PX4 flight controller. The systems are powered with a 3S 11 volts and 5.5 amperes per hour  lithium polymer battery (LiPo) battery\findex{lithium polymer battery}. The aerial robot is not equipped with a mobile computing hardware for computations and the study does not considers other classes of aerial robots. 

% VERY NICE STUDY
Concerning other related approaches for aerial coverage path planning, Li~et~al. propose a study~\citep{li2011coverage} based on enhanced cellular decomposition method. Li~et~al. plan the coverage in a polygon area and derive a covering methodology that minimizes the number of turns. The turns, already considered in the generic CPP by Arkin et al. and Huang~\citep{arkin2001optimal,arkin2005optimal,huang2001optimal}, are here furter showed less efficient from energy, duration, and tour length points of view. For complex polygons, Li~et~al. propose a convex decomposition algorithm for minimum width sum based on the greedy recursive method. To connect the decomposed sub-regions, the authors propose a minimum traversal algorithm of weighted undirected graph. The approach is complete in terms of algorithmic analysis. Li~et~al. propose the algorithms along complexity analysis and simulate the coverage on polygons of various shapes. They show their algorithms being optimal in terms of turns, nevertheless, they do not consider further different requirements for different aerial robots. Indeed a fixed-wing aerial robot has a greater turning radius compared to its rotary-wing counterparts. Moreover, Li~et~al. plan the coverage offline; they do not consider unexpected occurenses derived from robot's and environment's uncertainty such as sudden battery discharge, wind gusts, and other atmospheric condition, whereas we take these aspects into account in our dynamic planning. They further consider only path planning, opposed to planning the path along the computations energy-wise while optimizing the battery usage. 

% THIS IS a nice study that shows that turns are impractical when sharp with fixed-wings
Mannadiar~and~Rekleitis and Xu~et~al. propose studies~\citep{mannadiar2010optimal,xu2011optimal,xu2014efficient} on near to optimal complete coverage computed using a sequence of waypoints. The algorithm in near optimal rather than optimal because waypoint control has less manueverability against velicity control and cannot guarantee optimality in terms of the tour length~\citep{xu2014efficient}. The coverage algortihm~\citep{mannadiar2010optimal} was first presented by Mannadiar~and~Rekleitis and extended to non-holonomic robots~\citep{xu2011optimal,xu2014efficient} by Xu~et~al. The algorithm is based on cellular decomposition of a known environment with an arbitrary number of obstacles. The algorithm feds the decomposed cells into a Reeb graph\findex{Reeb graph}--an encoding used to compute a cyclic path whre crtical points are vertices and cells are edges of the graph~\citep{fomenko1997topological}--and solves the Chinese postman problem\findex{chinese postman problem}~\citep{eiselt2000historical} on the graph for the coverage order. The resulting path ensures that no cells is going to traversed twice with the robot returning to the starting point. The approach is interesting in terms of analysis for different aerial robots. Indeed Xu~et~al. analyze possible planning strategies for fixed-wing aerial robots and affirm that this latter class of robots lack the manueverability needed to follow a sharp-turned path. Likewise Xu~et~al., we also focused on this by generating paths that, among the other classes, can be followed by a fixed-wing aerial robots. Xu~et~al. add additional turning segment to the path by adding curlicue orbits at corners whereas we incorparate the turning meneauver in our dynamic planning rather than embedding external segments. Moreover, the studies do not focus an energy-efficient coverage path planning, on eventual replanning in case of adverse events, nor involve power-saving scheduling.

Other approaches for the optimality of the coverage focus explicitly on energy consumption of the aerial robot. Cabreira~et~al. and Artemenko~et~al. porpose studies~\citep{cabreira2018energy,artemenko2016energy} in this direction, focusing on photogametry and localization scenarios. Cabreira~et~al. propose spiral coverage for limited shapes of the coverage space and alter the velocity to achieve energy saving. Artemenko~et~al. propose a boustrophedon motion with smooted turns using B\'{e}zier curves\findex{B\'{e}zier curves} and analyze other motions. However, both Cabreira~and Artemenko~et~al.'s studies focus on a peculiar scenario rather than on generic coverage. Another interesting study provides and efficient coverage using different motion patterns for specific locations such as urban areas~\citep{dille2013efficient} but does not derive a generalized methodology. Others deal with optimal coverage deriving approaches~\citep{valente2013aerial,bouzid2017quadrotor} for rotary-wing aerial robot using interesting novel algorithms to find the optimal tour in a graph. In particular Valente~et~al. use harmony search\findex{harmony search}--a meta-heuristic algorithm based on musical harmony~\citep{geem2009music}--and Bouzid~et~al. use genetic algorithm. Generally all the studies in this paragraph focus on rotary-wing aerial robots. Although interesting in terms of analyzing the energy effciency, the studies do not propose replanning, nor power-saving scheduling.

%% optimal planning non aerial
%DONE 2 Optimal line-sweep-based decompositions for coverage algorithms
%DONE 7 Optimal covering tours with turn costs
%DONE 3 Coverage Path Planning Under the Energy Constraint


%% planning aerial robots

%%%% Zamboni these two were so so ...
%DONE 8 The ice rink problem
% proved zamboni is optimal is optimal to cover an area!
%DONE 5 !Path Smoothing! Paper with Khan et al.
% OUTCOME: Cite 1,19 when saying you cannot make sharp turn with a fixed-wing

%DONE 0 Online informative path planning for active classification using UAVs
%DONE -1 Multi-objective UAV path planning for search and rescue


%% aerial coverage
%DONE 15 An approach for coverage path planning for UAVs
%DONE 17 Recursive non-uniform coverage of unknown terrains for UAVs
%DONE 9 Curvature Continuous and Bounded Path Planning for Fixed-Wing UAVs 
%11 Multiple UAV area decomposition and coverage


%% optimal planning aerial
%DONE 4 Coverage path planning for UAVs based on enhanced exact cellular decomposition method


%DONE 1 Optimal complete terrain coverage using an Unmanned Aerial Vehicle
%DONE 19 Efficient complete coverage of a known arbitrary environmentwith applications to aerial operations
%DONE 18 Energy-Aware Spiral Coverage Path Planning for UAV Photogrammetric Applications
%DONE 13 Energy-Aware Trajectory Planning for the Localization of Mobile Devices Using an Unmanned Aerial Vehicle
%DONE 12 Efficient Aerial Coverage Search in Road Networks


%DONE 14 Quadrotor-UAV optimal coverage path planning in cluttered environment with a limited onboard energy
%DONE 16 Aerial coverage optimization in precision agriculture management: A musical harmony inspired approach


% okay this section, but we don't really contribute to any flight controller; so why to describe them...
%\subsection{\color{orange}Flight controllers}

%\subsection{\color{orange}Energy models in aerial robotics}

%\subsection{\color{orange}State estimation in aerial robotics}


\section{Planning Computations with Motion}
\label{sec:soa-comp-motion-pl}

Sudhakar~et~al. examin the trade-off between motion and computation energy for mobile robots in their recent study~\citep{sudhakar2020balancing}, focusing on robots with a comparable motion and computations energy. In the study, the robot moves on a path with a given length and velocity and computations-wise, computes a specific number of nodes. Sundhakar~et~al. derive first an analytical expression for energy prediction which incorporates the path's length and velocity and the number of computations' nodes. The approch they propose consists an algorithm for anytime planning--a planning approach that identifies an initial feasible plan then refined towards optimal over time~\citep{karaman2011anytime}. The algorithm eventually stops the refinments when it estimates computations energy exceeding the potential savings in terms of motion energy~\citep{sudhakar2020balancing}. To derive a path for the robot's motion, the algorithm uses a Bayes estimation on the edges of a graph in a sampling-based path planning algorithm--probabilistic RoadMaps (PRM*) widely used in practice~\citep{lavalle2006planning,karaman2011sampling}. The study is insightful in terms of further motivating our investigation and propose an initial step towards further analysis. Nevertheless, it lacks rigour in deriving an energy model and it does not account for battery SoC in a wider dynamic planning workflow. Notably, Sundhakar~et~al. empahatize the importance of considering both the motion and computations for robots energy-optimal planning; we share similar findings except for the study's claimed primate in analysis of trade-offs between motion and computations energy. By a closer incpection of the scientific literature, there are other studies that have focused in this direction. Apart our recent contributions, Mei~et~al., Sadrpour~et~al., and others propose studies that deal with motion and computations energy of mobile robots~\citep{mei2005case,mei2006deployment,brateman2006energy,zhang2007,lowsadrpour2013experimental,sadrpour2013mission}; and recent contributions include work carried by Ondr\'{u}\v{s}ka~et~al. and Lahijanian~et~al.~\citep{ondruska2015scheduled,lahijanian2018resource}.  % and we have been doing so since 2018; just use google my friend
% a side personal note is how this study went even through peer-review. "We  can  think  of lc as  length  of  the computation  which  is  analogous  to  length  of  the  path la" xD LOOOOOOOL
%TODO you forgot to write what sudhakar et al. does not do and you do

Mei~et~al., that we already analyzed for their contribution to motion planning in \fref{sec:soa-motion-pl}{Section}, have proposed a study~\citep{mei2005case} analyzing the both motion and computations energy. The study differentiates the microcontroller and embedded computer the mobile robot carries for a more flexible robot's design. To this end, Mei~at~al. derive an energy model from empirical data and importantly, show that the motion accounts for less than 50\% of the total power consumption. Motivated by this finding that on Pioneer 3DX ActivMedia--different version of Pioneer mobile robots from Adept MobileRobots were a popular at the time of publication within the research comunity~\citep{erickson2003nonlearning,anguelov2004detecting,lemmay2004autonomous}--they propose real time scheduling and dynamic power management to reduce the power consumption. The latter dynamically adjusts power states (by e.g., DVS, DFS, and peripherals selection) of components without compromising overall performance~\citep{mei2005case}, and the former schedule computations energy-wise. 
The study is of particular interest as they quantify the computations contribution to the overall energy expenditure of mobile robots. We further extend the study; it was indeed one of the starting points of our analysis although it does not implement the proposed techniques practically, nor focus on planning within battery constraints; a research gap we are filling with our dynamic planning. Although Mei~et~al. have extended their analysis in future instances~\citep{mei2006deployment,mei2005reducing,mei2005deployment} to CPP using a multiple robots with both time and energy constraints and to the problem of repeated coverage~\citep{mei2006energy}, they have not implemented computations scheduling nor focus on dynamic replanning of the coveragy with sudden battery discharge; an aspect that is of particular interst for aerial robots.
%TODO

% good cite: Even though DVS and energy conservation for mobile robots have been studied, the close interaction between computation and motion remains unexplored
Brateman~et~al. propose an interesting approach~\citep{brateman2006energy} on the intersection of medeling techniques for CPUs that we discuss in \fref{sec:soa-cpu}{Section} and of planning computations with motion for mobile robots. The methodology varies the computing hardware's frequency and voltage via DFS and DVS respectively and the motor's speed for energy efficiency. To find the best trajectory of frequency, voltage, and speed over time, Brateman~et~al. formulate an non-linear optimization problem (NLP), that they then solve using a  method. The predicted energy is an anlytical expression--derived via probabilitics analysis--that the methodology employs as a cost in the minimization within a time constraint. 
There are many more approaches that employ optimization techniques for energy-effciency of computations and motion in mobile robotics~\citep{zhang2007low,ondruska2015scheduled,lahijanian2018resource}. Zhang~et~al. varies the robot's speed and the computing hardware's frequency using optimal control on a random horizon. To find the solution to an optimal control problem which has an analytical expression of the frequency and speed as the cost, Zhang~et~al. transform the otpimal control problem (OCP) into a nonlinear optimization problem (NLP) that can be then solved using a standard numerical optimization approach~\citep{zhang2007low}. Interestingly, they also derive an analytical solutions to the OCP for some simplified costs and found up to 30\% energy savings compared to heuristics methods. Similarly to Brateman~et~al. and Zhang~et~al. we derive an OCP for the problem of replanning a coverage in \fref{cp:opt}{Chapter} but vary the coverage path and the schedule on the computing hardware rather than the frequency, voltage, and speed. The intuition behind our more complex planning is that by scheduling appropriately computations and varying path we can ensure the coverage despite external adversities opposed to merely minimizing energy consumption.

Sadrpour~et~al. focus on mission energy prediction for unmanned ground vehicles (\Gls{acr:ugv}s)\findex{unmanned ground vehicle}. In their studies~\citep{sadrpour2013mission,sadrpour2013experimental}, the mission energy is the energy needed to complete a given set of tasks by the robot travelling some paths while interacting with the environment (in form of sensing and actuating)~\citep{sadrpour2013mission}. Sadrpour~et~al. propose two predicition approaches depending on some a priori mission knowledge such as constant power drain of static components, driving style, road rolling resistance, road grade information, and vehicle internal resistance. In case of no prior knowledge, they propose linear regiession, and bayesian estimation otherwise. Sadrpour~et~al. report some finding on the energy predicition using PackBot UGV~\citep{yamaichi2004packbot} with the computations having an order of magnitude lower consumption than motion. Notably, Sadrpour along other researchers shared some finding in later studies~\citep{sadrpour2014real,ersal2014keeping} in the direction of UGVs performing CPP. Although the studies and their later iterations focus on energy modeling, they propose future direction in dynamic mission decision making; in case the energy exceed a resonable threshold, the UGV might, e.g., revise the initial plan or tuning energy expensive components~\citep{sadrpour2013mission}. Our dynamic planning shares a similar principle of tuning the plan to accomodate energy expenditure. We further focus on computational aspects, as in the mobile robots under our study and nevertheless in recent energy-efficient robotics platforms, the motion energy has the same order of magnitude as the computational energy~\citep{sudhakar2020balancing}.   

% Robots require energy to operate. Yet they only have access to limited energy storage during missions.
% good references for planetary exploration rovers, indeed ARC Q14 is implemented for this latter purpose
%  the energy  budget  for  sensing  and  computing  is  commensurate with  that  of  actuation  -  such  as  is  typically  the  case  forplanetary rover missions.
More recently, Ondr\'{u}\v{s}ka~et~al. propose a study~\citep{ondruska2015scheduled} to reduce energy consumption by scheduling robot's navigation while traveling a path at given times. The study focus on Oxford  Robotics  Institute's (ORI) ARC Q14 mobile ground-based robot--a robotic platform used maily for research in planetary exploration rovers~\citep{yeomans2017murfi}--folowing an predetermined path and accounts directly for computations energy. Ondr\'{u}\v{s}ka~et~al. propose to schedule the navigation so that the robot remains withing the predetermined path within a margin. For the scheduling itself, they derive two algorithms. A greedy algorithm that guarantees feasibility by employing a simple heuristic and a belief planning algorithm which uses optimal to provide the energy efficient schedules over a given planning horizon. The approach is of interest for our dynamic planning in many respects, although the author the problem of planning for path folowing rather than coverage. Firstly, the planning algorithm based on optimal control employes dynamic programming\findex{dynamic programming} and it's simalar to the algorithm that employes output model predictive control (\Gls{acr:mpc}) that we propose in our work in \fref{cp:dyn}{Chapter}. Secondly, the dynamic programming solution is proposed on a finite horizon and the same technique is on the base of the MPC replanning that we employ evaluate the optimal plan. Finally, the approach further motivates our planning. Ondr\'{u}\v{s}ka~et~al. report a saving of 11.5\% by employing power saving scheduler on the robot. We extend the approach by altering directly the schedule and the path and apply such planning to aerial robots.

% good cite: 
Lahijanian~et~al. have further extended Ondr\'{u}\v{s}ka~et~al.'s work and proposed a framework~\citep{lahijanian2018resource} for the exploration of reseource-perormance trade-offs. They find schedule for mobile robots under given resource budget using quantitative multi-objective verification and controller synthesis--a technique that from contraints such as time and energy produce Pareto front\findex{Pareto front}, a set of optimal achievable trade-offs~\citep{forejt2012pareto}. Although useful to select the best schedule and for the insights into different tradeoffs implications, the approach does not account for dynamic planning. Whereas in out work an initial plan accounts for the highest performance achievable; these are then replanned both path- and computations-wise over time in an energy-aware fashion. Lahijanian~et~al. similarly to Ondr\'{u}\v{s}ka~et~al. use the ARC Q14 robot.

\section{\color{red}Summary}

