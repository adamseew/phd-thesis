
%%%%%%%%%%%%%%%%%%%%%%
%                    %
% State of the Art   %
%                    %
\chapter{State of the Art}
\label{cp:soa}


In this chapter, we discuss the state of the art in energy modeling and optimization of computing hardware and mobile robots and in dynamic energy planning for mobile robots. We are interested in using the two energy models (of computing hardware and mobile robot) for the energy planning of the path and computations. Generally, planning algorithms in robotics center around robot motion planning and deal with problems such as swarms, dynamics, and uncertainty~\citep{lavalle2006planning}. Although there are several contributions applied to a variety of robots, we primarily focus on the literature that--similarly to our approach--plans the path along with computations. We especially emphasize approaches for mobile robots with energy constraints. 

We split the chapter into multiple sections and replicate our workflow throughout the topic. Initially, we analyzed some contributions that quantify the energy consumption of computing hardware carried by mobile robots. Modeling the energy of these devices has laid the foundation for our dynamic energy planning. In \fref{sec:soa-ene-mod}{Section}, we report our findings. We discuss the available approaches for battery modeling and the battery modeling and optimization of the mobile computing hardware in \fref{sec:soa-ene-bat}{Section}. We then briefly discuss some approaches for motion planning, planning with dynamical systems, and planning for aerial robots in \fref{sec:soa-motion-pl}{Sections}\fref{sec:soa-aerial-pl}{--\hspace{-.8ex}}. Although simultaneous dynamic planning of computations and motion is underrepresented~\citep{sudhakar2020balancing}, some recent contributions have proposed various techniques and further motivated our analysis. We report these in detail in \fref{sec:soa-comp-motion-pl}{Section}.

This chapter connects to the remainder of this work as follows. Here we discuss the state of the art of topics that allowed us to derive a dynamic energy planning approach for autonomous aerial robots. Based on these findings, we later propose a computations energy modeling technique to derive future energy consumption of mobile computing hardware along with motion in \fref{cp:model}{Chapter}. Planning in the context of mobile robots, under differential constraints, for aerial robots, and of computations and motion are the basis for the derivation of the optimal configuration in \fref{cp:dyn}{Chapter} of the plan and the planning problem that we defined in \fref{cp:pb}{Chapter}.


\section{Computations Energy Modeling}
\label{sec:soa-ene-mod}

There are several different energy modeling and optimization approaches for computations, usually under the topic of energy efficiency for computing hardware.
Such hardware is carried by aerial robots that we analyze in this work and is often composed of heterogeneous elements: one or more CPUs and a GPU as we outlined in \fref{sec:motivation}{Section}. Energy efficiency is critical for battery-constrained devices~\citep{rao2005battery} and a limiting factor in improving further computing performance~\citep{horowitz2014computing}. We split some of the available approaches in the literature into different classes, depending on their modeling and optimization approach. We illustrate an overview of the approaches we consider in \fref{tab:energy-models}{Table}. Due to the unpredictable nature of the heterogeneous elements, many contributions to energy modeling observe hardware characteristics and perform physical energy consumption measurements to derive an energy model. We analyze some of these contributions first. They treat the heterogeneous elements altogether and are of particular interest to our approach where we use heterogeneous mobile computing hardware. We then analyze the techniques that focus on the energy of GPUs. Finally, we analyze techniques that treat CPUs. Some of the latter are based on dynamic voltage scaling (\Gls{acr:dvs})\findex{dynamic voltage scaling} that scales down both the supply voltage and the frequency when there is no high computations demand~\citep{flautner2001automatic, chen2009fundamentals}. A review of techniques with different computing elements that focus on predictive modeling is provided by O'Neal~and~Brisk~\citep{oneal2018predictive} with emphasis on heterogeneous models based on machine learning.
Some other reviews that deal with energy modeling and focus on high-performance computing (HPC) systems are provided by O'Brien~et~al.\citep{obrien2017survey} and Czarnul~et~al.\citep{czarnul2019energy}. In the context of energy modeling, Czarnul~et~al. report existing tools for energy prediction in HPC systems and O'Brien~et~al. the accuracy of different models in the literature.

\begin{sidewaystable}
    \footnotesize\fontfamily{phv}\selectfont

    \begin{tabularx}{\textwidth}{l|*{6}{l|}X|l}\hline
      &  & Model & Technique & Accuracy & DVS & DFS & Platform & Mobile \\
      \hline
      \multirow{8}*{\rotatebox{90}{Heterogeneous}} & Marowka & Analytical & Selection & - & \xmark & \xmark & Intel Core-i7-960 (CPU), NVIDIA GTX 280 (GPU) & \xmark \\
      & Bailey et al. & Regression & Configuration & 91\%\footnote{accuracy under-limit against oracle with perfect knowledge} & \xmark & \xmark & AMD A10-5800K (CPU), Radeon HD7660D (GPU) & \xmark\\
      & Goraczko et al. & Analytical & Configuration\footnote{optimization problem solved with ILP} & - & (\cmark) & (\cmark) & ARM7 OKI ML675003 (CPU), TI MSP430F1611 (microcontroller) & \cmark  \\
      & Ma et al. & - & Configuration & - & \cmark & \cmark & AMD Phenom II X2 (CPU), NVIDIA GeForce 8800 (GPU) & \xmark \\
      & Yang et al. & Analytical & Pruning & - & \xmark & \xmark & - & \xmark\\
      & Calore et al. & Analytical & Selection & - & \xmark & [\cmark] & ARM Cortex-A15 (CPU), NVIDIA GK20A (GPU) & \cmark\\\hline
      \multirow{5}*{\rotatebox{90}{GPU}} & Hong and Kim & Analytical & Selection & 91.06\%\footnote{average accuracy for both power and time models against measuring hardware} & \xmark & \xmark & NVIDIA GTX280 (GPU) & \xmark\\
      & Wu et al. & Regression (ML) & Selection & 90\%\footnote{\label{foot:avg-in-tab-energy-model}accuracy against built-in power monitors (if the accuracy is reported for multiple hardware or benchmarks, it is average)} & \xmark & [\cmark] & AMD Radeon HD 7970 (GPU) & \xmark\\
      & Collange et al. & - & Selection & - & \xmark & \xmark & NVIDIA G80, G92, GT200 (GPU) & \xmark\\
      & Luo and Suda & Analytical & - & 88.87\%\footnoteref{foot:avg-in-tab-energy-model} & \xmark & \xmark & NVIDIA Tesla C2050 (GPU) & \xmark \\
      & Leng et al. & Analytical & Selection & 88.35\%\footnoteref{foot:avg-in-tab-energy-model} & \cmark & \cmark & NVIDIA GTX 480, Quadro FX5600 (GPU) & \xmark \\\hline
      \multirow{6}*{\rotatebox{90}{CPU}} & Lee and Brooks & Regression & Selection & 95.7\%\footnote{accuracy against median error, leveraging only the most relevant samples} & \xmark & \xmark & - & \xmark \\
      & Takouna et al. & Regression & Selection & 93\%\footnote{accuracy of 95\% of the predictions} & \xmark & \cmark & Intel Xeon E5540 (CPU) & \xmark \\
      & Reddy et al. & Analytical & Selection & 94\%\footnote{accuracy on 60 workloads}\textsuperscript{, }\footnoteref{foot:avg-in-tab-energy-model} & \cmark & \cmark & ARM Cortex-A15 (CPU) & \cmark \\
      & Nikov et al. & Regression & Selection & 92--95\%\footnote{accuracy against related work} & \cmark & \cmark & ARM Cortex-A15, Cortex-A7 (CPU) & \cmark \\
      & Nunez-Yanez~and~Lore & Regression & Selection & 95\% & \xmark & \xmark & ARM Cortex-A9 (CPU) & \cmark \\
      & Walker et al. & Regression & Selection & 96.2--97.2\% & \cmark & \cmark & ARM Cortex-A15, Cortex-A7 (CPU) & \cmark \\\hline
    \end{tabularx}
    \caption[Comparison of different computations energy models]{Comparison of different computations energy models. The model is either an analytical expression or a regression. The energy optimization technique is the selection of some architectural parameters, of computations configurations. Scaling is split into DVS and dynamic frequency scaling DFS. (\cmark) scaling is used only in the model, not in the optimization technique. [\cmark] values are changed statically (or manually where appropriate such as in Marowka).}
    \label{tab:energy-models}
\end{sidewaystable}

\subsection{Heterogeneous elements modeling}
\label{sec:soa-ene-hete}

Modern computing hardware energy modeling and optimization techniques often deal with the heterogeneous computing elements altogether using statistical tools. Such tools are inexpensive to deploy and relatively accurate in predicting future computations energy consumption~\citep{bailey2014adaptive}. Although there are further optimizations available by looking at the elements (CPUs, GPUs) separately, these are often application and hardware-dependent. Instead, we focus on a generic computations energy model that can be used independently of the hardware and computations under analysis. 

A model for heterogeneous elements is derived by Marowka~\citep{marowka2017energy}. The model is based on some power metrics: the scaled speedup, scaled performance per watt, and scaled performance per joule. The approach increases energy efficiency by choosing the configuration of the heterogeneous components--for instance, by enabling computations only on CPU cores--and hence, investigates the impact of different architectural choices on energy efficiency. In particular, the model is used to analyze the energy of three processing schemes: symmetric, asymmetric, and simultaneous. The former uses merely a multicore CPU. Asymmetric processing scheme both CPU and GPU. The software benchmark on this scheme consists of running a program on one of the computing elements at a time. The latter processing scheme is similar to the previous, but the software benchmark runs on CPU and GPU simultaneously. Our work extends the model and builds a computations model to the simultaneous processing scheme.

A more sophisticated statistical model relies on multivariate linear regression for heterogeneous elements and is derived by Bailey~et~al.~\citep{bailey2014adaptive}. The model eases the selection of the application's configuration that maximizes performance under given power constraints. It is trained offline with a small set of benchmarks and works across multiple devices. The overall flow of the proposed approach is composed of two stages. The first stage is the offline training stage. The stage utilizes a small training set of benchmarks split into clusters. The model is built then with a regression per each cluster. After this stage, follows the online predicting stage. The latter uses the model to predict the power and performance of a large set of applications (opposed to the relatively small number of benchmarks in the offline stage). Our work similarly models a subset of samples and infers properties of the entire search space. However, our work focuses on mobile computing hardware that we use for aerial robots.

A resource model for heterogeneous mobile devices developed by Goraczko~et~al.~\citep{goraczko2008energy} considers both the time and power of a given run-time mode (Goraczko~et~al. use the term mode rather than configuration used by Marowka and Bailey~et~al.). Goraczko~et~al. use a CPU and a microcontroller as a heterogeneous platform opposed to GPU in the past approaches in this section. Energy-wise, the resource model uses DVS as some other models in \fref{sec:soa-cpu}{Section} but accounts for heterogeneous elements. The approach models multiple processors with a state machine then used to derive a software partitioning problem--the problem of deriving the optimal mode. The problem is solved with an optimization technique: integer linear programming (ILP)\findex{integer linear programming}. The optimization occurs over an energy cost and with given deadline constraints. The intuition of formally defining the problem of deriving the optimal mode is similar in our work, which we expanded further by merging the path in our dynamic energy planning.

A holistic approach for heterogeneous elements energy efficiency  is proposed by Ma~et~al.~\citep{ma2012holistic}. The approach achieves energy efficiency by splitting and distributing the workload among the heterogeneous elements. Ma~et~al. then use frequency scaling for the CPU and GPU, and \Gls{acr:dvs} for the CPU. GPU-side, the frequency is determined with a lightweight machine learning algorithm. Energy in this approach is analyzed by empirical means, using two power meters. The testbed under analysis--NVIDIA GeForce GPUs and AMD Phenom II CPUs--does not include built-in power monitors, and overall, Ma~et~al. do not consider mobile computing heterogeneous hardware or derive a model for the energy. Nevertheless, the approach is of interest for energy implications of heterogeneous elements.

Recently, approaches are emerging to model the energy consumption of machine learning algorithms.
Some computations-specific modeling approaches have been developed in this context by Yang~et~al.~\citep{yang2017method}, and more recently surveyed by Garc{'\i}a-Mart{'\i}n~et~al.~\citep{garcia2019estimation}. The latter is a literature review motivated by the lack of appropriate tools to build and measure power models in existing machine learning suites. Garc{'\i}a-Mart{'\i}n~et~al. describe the state of the art of energy estimation for convolutional neural networks (\Gls{acr:cnn}s) and data mining\findex{data mining}. Yang~et~al. evaluate an energy model of deep neural networks (\Gls{acr:dnn}s)\findex{deep neural network} based on a network bitwidth, sparsity, and architecture. The methodology applies exclusively to DNNs, but has been extended and used with CNNs~\citep{yang2017designing} in an optimization loop to reduce the computations energy consumption. A survey to optimize and evaluate neural networks on some of the embedded platforms that we use in this work (NVIDIA Jetson TK1 and TX2) specifically is proposed in~\citep{mittal2019survey}. 

A review of operating system level energy management techniques for heterogeneous element of computing hardware is carried by Kim~et~al.~\citep{kim2018survey}. Although Kim~et~al. do not deal with energy models, they list energy management techniques such as power-saving schedule that we utilize to dynamically optimize the energy resource of the aerial robots. They also detail aspects such as Quality of Service (QoS)\findex{quality of service} that we use to define execution boundaries for the computations. 

Our initial approach~\citep{seewald2019hlpgpu} relied on external meters rather than internal power monitors. A similar technique has been developed by Calore~et~al.~\citep{calore2015energy} to measure the energy efficiency of HPC systems. In both ours and Calore~et~al. approaches, the methodology is tested on the NVIDIA Jetson TK1 computing hardware that does not include built-in power monitors as opposed to other computing hardware that we analyze.


\subsection{GPU features modeling}

GPUs are used in several applications due to their high computational resources~\citep{kasichayanula2012power}, which come at a price of increasing energy demands~\citep{mittal2014survey}. It is hence unsurprising that for computations energy modeling, GPUs have their own modeling approaches. Here we discuss some of the approaches of interest to our work. Extensive reviews of the available methodologies are proposed by Mittal~and~Vetter~\citep{mittal2014survey} and by Bridges et al.~\citep{bridges2016understanding} but are not tailored to mobile computing hardware.

An energy model that analyzes GPU features is derived by Hong~and~Kim~\citep{hong2010integrated}. The contribution consists of an integrated power and performance prediction model to derive the optimal number of active cores for a given application to achieve energy savings~\citep{hong2010integrated}. The model is GPU specific: it consist of an analytical expression which estimates the GPU power and time in function of some parameters. Opposite to our work, it does not model the energy of the entire platform nor is deployed on mobile computing hardware. Nevertheless, it achieves high accuracy in terms of GPU power and time prediction.

A similar focus on GPU features is proposed by Wu~et~al.~\citep{wu2015gpgpu}. The approach uses machine learning techniques to evaluate the performance and estimate the power from real GPU hardware. In particular, Wu et al. trains a neural network with different performance counters for various GPU configurations of a collection of applications, and derive the optimal values of these counters. The data gathered from one hardware are used to estimate the power and performance for multiple other GPU hardware. Like the approaches in~\fref{sec:soa-ene-hete}{Section}, the approach is computation-independent and requires no source code analysis. Moreover, machine learning is an energy-expensive computation itself~\citep{garcia2019estimation,yang2017method}, thus deterring similar approaches in our planning where we aim to preserve the energy as far as possible.

An empirical approach for energy evaluations of GPUs during various computations in the CUDA\findex{CUDA} environment is proposed by Collange~et~al.~\citep{collange2009power}. The approach measures and analyzes how computations impact instantaneous energy consumption. It observes a significant energy impact of memory accesses and generally analyzes the energy cost of parallel GPU computations. The work by Collange~et~al. thus aims to derive the optimal memory configuration of a given benchmark. However, it does not use the measured data to calibrate a model for energy estimation, nor focus on mobile computing devices.

Contrary to the previous approach of pure empirical measurements, Luo~and~Suda\citep{luo2011performance} proposes an analytical model for energy and performance estimation of GPUs. The model contains execution time and energy consumption prediction sub-models, where the latter follows from the former. The final analytical model for the energy estimation multiplies the execution time and the estimated power derived using an analytical expression. The work derives some observations on energy implication of a given benchmark, which is then not used nor hypothesized in any energy adaptation technique. The accuracy analysis, redefined by the authors with another analytical expression, shows a strong correlation between observation and the analytical model. We also derive an analytical expression. We further motivate such expression with empirical observation of energy data and employ a multivariate linear regression. We then focus on heterogeneous elements and mobile computing hardware.

A model based on a performance-per-watt metric for GPUs is proposed by Leng~et~al.~\citep{leng2013gpuwattch}. Developed for general-purpose GPU (GPGPU)\findex{genral purpose GPU} powered devices, it is composed of multiple stages. An initial model is validated with some empirical measurements and eventually refined.  The contribution suggests an integrated power and performance modeling framework, which inputs a configuration to define micro-architectural and component parameters. It is then used in a feedback-driven optimization loop with the GPGPU. In our approach, we similarly input a configuration to the model but we specifies the computing hardware's computations rather then architectural parameters. We use the output of the model in an optimization loop but extend this latter stage together with the path. Computation-wise, we use both heterogeneous elements.

\subsection{CPU features modeling}
\label{sec:soa-cpu}

Numerous other contributions model the CPU energy specifically and investigate how to lower the power~\citep{hong1999power, luo2001battery, chowdhury2005static} by some system-level modeling and optimization techniques including DVS, multiple asymmetric cores (such as the ARM big.LITTLE architecture), and power gating~\citep{walker2017accurate}. They usually incorporate information about configuration parameters into the scheduler~\citep{seewald2019coarse} and focus on homogeneous opposite to heterogeneous systems in our work. 

A model for microprocessors based on regression is proposed by Lee~and~Brooks~\citep{lee2006statistically,lee2006accurate}. The model is built with a small number of samples of both the power and performance in a joint architecture-computations search space. Lee~and~Brooks provide extensive coverage of regression modeling and use the same model specification for power and performance. The entire search space is sampled uniformly at random, an approach that allows identifying trends and trade-offs between the parameters~\citep{lee2006accurate}. The results show high accuracy even with a relatively small number of samples. We likewise use a regression model in our computations energy modeling approach but cover all the heterogeneous elements. Nonetheless, Lee and Brooks' approach is of interest to evaluate the accuracy of regression techniques and distributions of samples. Depending on the configuration space we sample the computations uniformly using a linear or exponential distribution of samples whereas Lee~and~Brooks samples architectural parameters. We specify the sampling distance in a configuration file. 

Statistical multicore CPU\findex{multicore CPU} power models are presented by Takouna~et~al.~\citep{takouna2011accurate}. These models are based on the average running frequency and the number of active cores. Commonly to other computations energy models, they use multivariate linear regression. Although insightful in terms of multicore CPU power models, the approach does not model GPUs nor heterogeneous elements. Moreover, it is tailored on virtualized serves, opposed to mobile computing hardware that we focus on in this work. Moreover, Takouna~et~al. do not consider computations configurations in the regression, but a variable selection of architectural parameters. 

An empirical CPU power model is presented by Reddy~et~al.~\citep{reddy2017empirical}. The model uses measured data and simulates the energy consumption of a quad-core ARM Cortex-A15 and gem5\findex{gem5}, a full-system architectural performance simulator. To collect the measurements, the model uses built-in power monitors in the ODROID-XU3 platform and evaluates the model against sixty workloads reporting high accuracy (the average error between estimated and real power is less than six percent). Our model shares compatibility with the ODROID-XU3 platform but is not simulator-dependent. It further models heterogeneous computing hardware such as NVIDIA Jetson TK1, TX2, and Nano platforms. 
 
Other models for mobile computing hardware based on the ODROID-XU3 platform are developed by Nunez-Yanez~and~Lore~\citep{nunez2013enabling} and by Nikov~et~al.~\citep{nikov2015evaluation}. These models use hardware event registers and capture the state of the CPU under a representative workload. They have three modeling stages: data collection of a benchmark running on the platform occurs in the first stage. The second and third stages are performed offline on a different architecture. They process the collected data (in the second stage) and generate the model (in the third stage)~\citep{seewald2019coarse}. In~\citep{nikov2015evaluation}, the model deals with ARM big.LITTLE architecture. We use these models to evaluate the performance of our computations energy modeling.

A run-time model that uses performance monitoring counters (PMCs)\findex{performance monitoring counters} for mobile computing hardware is proposed by Walker~et~al.~\citep{walker2017accurate}. The approach is implemented on mobile CPUs such as ARM Cortex-A7 and Cortex-A15 and can be implemented on other CPUs. Likewise in~\citep{reddy2017empirical}, the model can be used with the architectural performance simulator gem5, and likewise in~\citep{nunez2013enabling,nikov2015evaluation,reddy2017empirical}, it is implemented on the ODROID-XU3 platform. The approach builds a linear regression for a given experiment for CPU power prediction. Although it considers CPU-powered computing hardware only, it is insightful in terms of proposed statistical rigor in building run-time CPU power models.

\section{Battery Modeling}
\label{sec:soa-ene-bat}

In this section, we describe some battery modeling approaches and focus on battery models that we can use with both the computing hardware and the aerial robot. There are several models for this purpose, each with its advantages and disadvantages. The state of the art in battery modeling is surveyed by Rao~et~al.~\citep{rao2003battery}.
Physical models use ordinary and partial differential equations to accurately predict the battery evolution in time~\citep{rao2003battery}. These models come at a considerable time and computational cost~\citep{doyle1993modeling,marcicki2013design,lotfi2017reduced,moura2017battery}. Nevertheless, some hybrid models with less computational complexity have emerged as well~\citep{kim2011hybrid,kim2019enhanced}. Empirical models model the battery out of a set of empirical trials~\citep{syracuse1997statistical,pedram1999design}, in a similar way as many computations energy models in \fref{sec:soa-ene-mod}{Section}. They have a relatively low analytical insight~\citep{rao2003battery}, opposed to mixed models that derive some parameters from analytical expressions and experimental data~\citep{rao2003battery,rakhmatov2001analytical}. Abstract methodologies use techniques such as the time evolution of an equivalent electrical circuit~\citep{gold1997pspice,benini2001discrete,seongjun2008state,xiaosong2012comparative,xing2014state,hasan2018exogenous} similarly to hybrid models~\citep{kim2011hybrid} but with less computational complexity. They have compelling trade-offs in terms of analytical insight, accuracy, and complexity~\citep{rao2003battery} and are the models of our choice for battery modeling.

Abstract models with an equivalent electrical circuit are presented by Xing~et~al.~\citep{xing2014state} and Hasan~et~al.~\citep{hasan2018exogenous}. These models model the battery state of charge (SoC) with the evolution in time of a differential model of an equivalent circuit. The first model~\citep{xing2014state} utilizes an unscented Kalman filter to tune some parameters at each sampling step. the SoC is then estimated in the second model~\citep{hasan2018exogenous} utilizing an eXogenous Kalman filter~\citep{johansen2017exogenous}. We use the model from Hasan~et~al. for the battery modeling. We derive an equivalent circuit for a Li-ion\findex{Li-ion battery} aerial robot battery and evaluate the SoC over time with an equivalent differential equation to the one proposed in~\citep{hasan2018exogenous}. 

A battery model for computing hardware specifically is proposed by Rao~et~al.~\citep{rao2005battery}. The approach consists of an abstract stochastic model\findex{stochastic battery model} that uses Markov processes\findex{Markov processes} with probabilities related to the physical characteristics of the battery~\citep{panigrahi2001battery}. Rao~et~al. improve further the accuracy of the model including some physical battery characteristics. The approach is useful in terms of evaluating models for computing hardware. Indeed our approach relies similarly on an abstract model~\citep{hasan2018exogenous}, whereas we focus on models based on an equivalent electrical circuit which requires less battery-specific knowledge for modeling. We can then model the SoC with little information regarding what battery is mounted on the aerial robot. 

A modeling technique for smartphones is proposed by Zhang~et~al.~\citep{zhang2010accurate}. The approach consists of an automated modeling technique that uses knowledge of battery discharge behavior and battery voltage sensors. The technique models the power using a multivariate regression (similarly to our approach and many computations energy models in \fref{sec:soa-ene-mod}{Section}) and the battery using an equivalent circuit. Although the analysis is limited to smartphones, it is insightful in terms of automated modeling techniques for computing hardware. We have similarly derived an automated modeling technique for computations, battery, and entire system model that we integrate into our dynamic energy planning for aerial robots.

A battery model for the low-power design of computing hardware is presented by Benini~et~al.~\citep{benini2001discrete}. The model is also derived from an equivalent circuit but is discrete-time and intended for system-level design environments. Although specific to this latter application, it evaluates different battery types: a first Li-ion implementation of the model is extended to various battery types with both non and rechargeable cells. 




---



%Calore et al. develop an approach for measuring power efficiency for High-Performance Computing or HPC systems~\citep{calore2015energy}. An external board is used to measure the power consumption, while the data are collected from NVIDIA Jetson TK1 board running one benchmark. Our initial analysis presented at HLPGPU 2019 was made using a similar technique~\citep{seewald2019hlpgpu}. A shunt resistor and digital multimeter integrated into the external board was used to evaluate the power efficiency. In this paper we extend our experiments to use internal power monitors and address a broader range of platforms. We now build a proper energy model that reflects the computational behavior of the device under study and shows the energy evolution. An early report on our work has been presented in the TeamPlay project's deliverable D4.3~\citep{teamplay} ``Report on Energy, Timing and Security Modeling of Complex Architectures''.


\section{\color{cyan}Motion Planning}
\label{sec:soa-motion-pl}

Planning algorithms literature for mobile robots includes topics such as trajectory generation and path planning. Generally, the algorithms select an energy-optimized trajectory~\cite{mei2004energy}, e.g., by maximizing the operational time~\cite{wahab2015energy}. However, they apply to a small number of robots~\cite{kim2005energy} and focus exclusively on planning the trajectory~\cite{kim2008minimum}, despite compelling evidence for the energy consumption also being significantly influenced by computations~\cite{mei2005case}. Given the availability of powerful GPU-equipped mobile hardware~\cite{rizvi2017general}, the use of computations is expected to increase in the near future~\cite{abramov2012real,satria2016real,jaramillo2019visual}. More complex planning, which includes a broader concept of the plan being a set of tasks and a path, all focus on the trajectory~\cite{mei2005case,mei2006deployment} and apply to a small number of robots~\cite{sadrpour2013mission,sadrpour2013experimental}. For UAVs specifically, rotorcrafts have also gained interest in terms of algorithms for energy-optimized trajectory generation~\cite{morbidi2016minimum,kreciglowa2017energy}. 

Mei~et~al. propose an energy-efficient motion planning for mobile robots distinguishing the two major energy consumers--the computations and motion energy. In~\citep{mei2004energy} focus on optimizing the motion energy, although they analyzed the computations energy in a later iteration of their work~\citep{mei2005case} (we discuss this latter study in \fref{sec:soa-comp-motion-pl}{Section}). Their motion plan is composed of a path plan and a velocity schedule; the path plan is similar to the our plan in \fref{def:plan}{Definition}, whereas the velocity schedule contains velocities, accelerations, and decelerations along the route. Mei~et~al. then analyze the most energy efficient path plan and velocity schedule. The major contributions spans from analyzing the energy cost of a plan along the energy of turns and accelerations, the analysis of travelled against motors velocities, to experimental evaluations. We have likewise optimized the coverage plan in \fref{sec:path-wise}{Section} compared to traditional coverage planning using e.g., boustrophedon decomposition~\citep{lavalle2006planning}. We do not consider a velocity schedule in our dynamic planning due to the physical constraints of airborne systems. Nevertheless our approach is optimized against sudden accelerations. Indeed one of the observation Mei~et~al. underline is the energy cost of turns; to this end our algorithm minimizes the number of turns in  the coverage. Recall the plan in \fref{fig:plot3}{Figure} requires sudden decelerations opposed to the plan in \fref{fig:plot4}{Figure} specifically optimized for fixed-wing crafts.
The study uses Palm Pilot Robot Kit as experimental setup with polyurethane omnidirectional wheels\findex{omnidirectional wheels} and three MS492MH DC servo motors. Mei~et~al. use external power monitors to measure the power drain of the systems and 9 V along four 1.5 V batteries for the control circuit and motors respectively. They measure the energy efficiency in terms of squared meters over jouls and report an improvement of 50\% by using an energy optimized path plan. 
Mei~et~al. study has encouraged our initial analysis in dynamic planning in many respects: Mei~et~al. are the first energy efficiency study we found that analyzed motion and computations energy, that analyze plan variations energy-wise, and that distinguish explicitly the need to account for computations energy~\citep{mei2005case}. However, Mei~et~al. lack in further analysis of energy efficiency in path variations. Indeed they focus on straight lines, spirals, and the energy cost of turns rather whereas we focus on a generic variation in path within given limits. They do not address explicitly computations and motion planning but propose foundations for future studies.

Dressler and Fuchs undertake a different approach to energy efficient motion planning. In their work~\citep{dressler2005energy} they focus on energy modeling of motion plans for given tasks (the term is not to be confused with computational tasks), where e.g., the mobile robot has to reach a location in space and take an image. Dressler and Fuchs propose a future planning direction based on energy control and battery management to allocate the tasks in an energy efficient way. The study models energy-consuming parts of the robot with some corresponding characteristic curves and it is hypothesized to a scenario for exploration and supervision of unknown surroundings. Dressler and Fuchs observe a linearly approximable of the SoC for some sub-tasks of a given task such as movement and wireless communication. The study lays basic for future analysis on the topic but does not investigate further dynamic planning for mobile robots. Although we don't model the energy of a given task, we similarly formulate the plan as a set of paths and computations in \fref{def:plan}{Definition} of which we derive the optimal configuration energy wise. Although preliminary--Dressler and Fuchs have further developed the approach, however, focused on sensor networks~\citep{fuchs2006distributed,dressler2006lifetime}--the study has inadvertently introduced the differentiation between computations and motion energy components that we have built upon. The reported sub-tasks energy models are indeed relative to one or another of the two components. The wireless communication is relative to a computation that transfer data airborne, the movement to a path to reach the location.

Choset propose a survey~\citep{choset2001coverage} of studies on coverage for robotics. The survey classifies the studies according to the decomposition algorithm; the classification includes heuristic, and cellular decomposition based (these are approximate, partial-approximate, or exact cellular decompositions). Choset report that many methods for coverage planning with some guarantee in terms of either optimality or completeness are based on cellular decomposition--a geometric structure to represent the robots' free space. The methods decompose than the free space in sub-regions~\citep{galceran2013survey}, which are easy to cover~\citep{galceran2013survey}. It is then enough to visit each one of these sub-regions~\citep{galceran2013survey}. 

More recently, Galceran~and~Carreras propose a survey~\citep{galceran2013survey} of the different approaches for coverage path planning. The survey distinguish the algorithms among the others as on-line and off-line where the former rely on stationary information under a known environment and the latter on sensor measurements to sweep the space~\citep{galceran2013survey} . Notably, Galceran and Carreras report that most coverage planning algorithms\findex{coverage planning algorithms}  decompose the space in sub-regions called cells to achieve coverage. The survey is extensive in terms of reviewed literature; it compromise studies focusing on cellular decomposition, cellular decomposition base on critical points of Morse functions\findex{Morse functions} (the latter can deal with generalized obstacles), graph (such as roads and streets networks), and grid algorithms. The work further surveys appraoches based on detection of natural landmarks, approaches for robot with contact sensors, and operating in rectilinear evironments; approches for 3D environments, optimal coverage, for multiple robots, and based on reduction of localization error. 






The majority of other contributions in the literature focus on optimizing motion planning to increase power efficiency. For instance, approaches to minimize UAV power consumption, such as the work by~\citep{kreciglowa2017energy}, aim to determine the best trajectory generation method for an aerial vehicle to travel from one configuration to another. Uragun suggests the use of power-efficient components~\citep{uragun2011energy}: an energy-efficient UAV system can either be built using conceptual product development with emerging technologies or using energy-efficient components. Kanellakis et al. affirm that integrating visual sensors in the UAV ecosystem still lacks solid experimental evaluation~\citep{kanellakis2017survey}. They suggest that to save energy, the available payload for sensing and computing has to be restricted.

\section{\color{orange}Planning with Dynamics}
\label{sec:soa-dynamics-pl}

\section{\color{orange}Planning for Autonomous Aerial Robots}
\label{sec:soa-aerial-pl}

Di~Franco~and~Buttazzo propose an energy-aware coverage path planning for aerial robots. The study~\citep{difranco2015energy} focus on energy and other requirements, such as coverage and resolution.  The model is generic for a given drone and outputs the energy consumption as a function of velocity and operating conditions by means of an interpolating curve of the power measurements. In particular, for future energy predictions Di~Franco and Buttazzo derive an energy model from real measurements flying the drone in several scenarios (during maximum acceleration and deceleration, horizontal flight, climbing, descending, hovering, and turns). Thus the study considers different analytical expressions derived from the interpolations for the scenarios. The study considers a search area that forms a polygon surveyed with the boustrophedon decomposition similarly to \fref{fig:plot3}{Figure} but with abrupt turns. Di~France and Buttazzo consider the quality of the coverage by e.g., varying the distance between the survey lines in case the total energy derived from the model is lower thatn the available energy, however, they do not plan this aspect in flight, nor focus on other aspects of the aerial robot flying (such as the quality of the computations being executed). Moreover, the energy model is plan specific; indeed different paths have different analytical expression for the future energy opposed to our model in \fref{sec:periodic-model}{Section} that is generic once trained with enough measurements for a given plan variation. The study is nevertheless useful in terms of defining the energy cost of a given coverage, and insights into how the variations in the survey quality affects the power consumption. The study focuses on IRIS rotary wing aerial robot (it has four 850 Kv motors), a GoPro camera mounted on a Gimbal stabilizer, and a PX4 flight controller. The systems are powered with a 3S 11 volts and 5.5 amperes per hour  lithium polymer battery (LiPo) battery\findex{lithium polymer battery}. The aerial robot is not equipped with a mobile computing hardware for computations and the study does not considers other classes of aerial robots. 

In the context of aerial robots, the survey~\citep{galceran2013survey} proposed Galceran~and~Carreras that we discussed in \fref{sec:soa-motion-pl}{Section} focus on optimal coverage~\citep{xu2011optimal} and multi-robot coverage~\citep{ahmadzadeh2008optimization,maza2007multiple,barrientos2011aerial}. Our work come into the intersection of optimal coverage and coverage performed using aerial robors. Indeed in our coverage planning we dynamically refine a plan to achieve optimal behavior energy-wise.

\subsection{\color{orange}Flight controllers}

%\subsection{\color{orange}Energy models in aerial robotics}

%\subsection{\color{orange}State estimation in aerial robotics}

\subsection{\color{orange}Optimal control in aerial robotics}


\section{\color{cyan}Planning Computations with Motion}
\label{sec:soa-comp-motion-pl}


Our approach shares the same principle of differentiating the microcontroller from the companion computer with~\citep{mei2004energy, mei2005case}. The controller acts on the actuators and reads the sensors, while the companion computer (can be found with different names in literature, such as secondary or embedded computer), performs computationally heavy operations. A similar approach for mobile robots is presented by~\citep{dressler2005energy}. However, both contributions neither elaborate further on computational elements of a heterogeneous platform, such as GPU, nor focus on different robots except the one under analysis.

Our approach towards energy modeling shares a similar principle as the one presented by~\citep{sadrpour2013mission, sadrpour2013experimental} for Unmanned Ground Vehicles or UGVs. They propose a linear regression-based technique in the absence of real measurements and a Bayesian networks-based one in their presence. We used a simplified approximation technique to limit the number of computations needed while focusing rather on an accurate battery prediction.

\section{\color{red}Summary}

