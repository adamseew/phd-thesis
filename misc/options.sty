
%%%%%%%%%%%%%
%           %
% Options   %
%           %
\usepackage[activate={true,nocompatibility},final,tracking=true,kerning=true,spacing=true,factor=1100,stretch=10,shrink=10]{microtype} % better typography?

\usepackage{lettrine} % drop caps to chapter openings
\renewcommand{\LettrineFontHook}{\fontfamily{phv}}

\usepackage{graphicx}
\usepackage[math]{iwona}
\usepackage{ebgaramond}
\usepackage[xindy,toc=false,nogroupskip]{glossaries-extra}
\usepackage{glossaries}
\usepackage{imakeidx}

\usepackage{helvet} % sans serif

\usepackage{xcolor} % colors
\definecolor{foo}{RGB}{0,51,102}

\newcommand*{\formatpagenum}[1]{\textcolor{foo}{\footnotesize\fontfamily{phv}\selectfont#1}}
\newcommand*{\findex}[1]{\index{#1|formatpagenum}}

\indexsetup{othercode=\small}

\renewcommand{\glsnamefont}[1]{\textbf{#1}}

\newglossary*{notation}{Notation}
\newglossary*{acronym}{Abbreviations}

\renewcommand{\glossarypreamble}{%
 \glsfindwidesttoplevelname[\currentglossary]%
}

\newcommand{\hsp}{\kern 1pt} % for nested quotation marks

% Paragraph formatting
\renewcommand{\baselinestretch}{1.125} % paragraphs spreads the lines further
\setlength{\parskip}{0pt} % disable variable parskip
\setlength{\parindent}{1em}

\frenchspacing % no extra space after sentences

\widowpenalty=10000 % minus widows/orphans
\clubpenalty=10000

% page size
\usepackage[
    paperheight=9in,
    paperwidth=6in,
    top=0.75in,
    bottom=0.75in,
    outer=0.75in,
    inner=0.875in
]{geometry}

% reduce overfull \hbox{} warnings
\sloppy

% chapter headings
\usepackage[explicit]{titlesec}

\titleformat{\chapter}[display]
  {\fontfamily{phv}\selectfont\LARGE\bfseries\color{foo}}{\chaptertitlename\ \thechapter}
  {10pt}{\fontfamily{phv}\selectfont\huge#1}
\titlespacing*{\chapter}
  {0pt}{80pt}{40pt}  % controls vertical margins on title
\titleformat{\section}
  {\fontfamily{phv}\selectfont\large\bfseries\color{foo}}
  {\thesection}{1em}{#1}
\titleformat{\subsection}
  {\fontfamily{phv}\selectfont\bfseries\color{foo}}
  {\thesubsection}{1em}{#1}

% contents page
\usepackage[titles]{tocloft}
\renewcommand{\cftchapfont}{\small\fontfamily{phv}\selectfont\itshape}
\renewcommand{\cftsecfont}{\footnotesize\fontfamily{phv}\selectfont\itshape}
\renewcommand{\cftfigfont}{\footnotesize\fontfamily{phv}\selectfont\itshape}
\renewcommand{\cftsubsecfont}{\footnotesize\fontfamily{phv}\selectfont\itshape}
\renewcommand{\cftchappagefont}{\color{foo}\footnotesize\fontfamily{phv}\selectfont}
\renewcommand{\cftsecpagefont}{\color{foo}\footnotesize\fontfamily{phv}\selectfont}
\renewcommand{\cftsubsecpagefont}{\color{foo}\footnotesize\fontfamily{phv}\selectfont}
\renewcommand{\cftfigpagefont}{\color{foo}\footnotesize\fontfamily{phv}\selectfont}
\renewcommand{\numberline}[1]{}

% page number style
\usepackage{etoolbox}
\makeatletter
   \patchcmd{\ps@myheadings}{\hfil\thepage}{\fontfamily{phv}\selectfont\footnotesize\nouppercase\oldthepage\thepage}{}{}
\makeatother

% headers/footers
\usepackage{fancyhdr}
\setlength{\headheight}{15pt}
\fancyhf{}
\renewcommand{\headrulewidth}{0pt}
\fancyhead[LE]{\fontfamily{phv}\selectfont\footnotesize\thepage}
\fancyhead[RO]{\fontfamily{phv}\selectfont\footnotesize\thepage}
\fancyhead[LO]{\itshape\slshape\fontfamily{phv}\selectfont\footnotesize\nouppercase{\rightmark}} 
\fancyhead[RE]{\itshape\slshape\fontfamily{phv}\selectfont\footnotesize\nouppercase{\leftmark}}

\fancypagestyle{plain}{%
  \fancyhf{}%
  \fancyfoot[C]{\fontfamily{phv}\selectfont\footnotesize\thepage}%
  \renewcommand{\headrulewidth}{0pt} % line at the header
  \renewcommand{\footrulewidth}{0pt} % line at the footer (both not visible)
}

% blank pages with disabled the current page style
\makeatletter
\def\cleardoublepage{\clearpage\if@twoside \ifodd\c@page\else
   \hbox{}\thispagestyle{empty}\newpage\if@twocolumn\hbox{}\newpage\fi\fi\fi}
\makeatother

% bibliostyle
\PassOptionsToPackage{
  natbib=true,
  style=authoryear-comp,
  hyperref=true,
  backend=biber,
  maxbibnames=200,
  giveninits=true,
  uniquename=init,
  maxcitenames=2,
  parentracker=true,
  url=false,
  doi=false,
  isbn=false,
  eprint=false,
  backref=true,
}{biblatex}
\usepackage{biblatex}
\renewcommand*{\bibfont}{\fontfamily{phv}\selectfont\footnotesize}
\usepackage[hidelinks]{hyperref}
\hypersetup{allcolors=foo}
\renewcommand*{\citesetup}{%
  \footnotesize\fontfamily{phv}\selectfont
  \biburlsetup
  \frenchspacing
}

\usepackage{graphicx} % images
\graphicspath{ {./pictures/}{./figures/} } 
\usepackage{caption}
\DeclareCaptionFont{captionff}{\footnotesize\fontfamily{phv}\selectfont}
\captionsetup[figure]{labelsep=period,font=captionff}
\renewcommand{\thefigure}{\footnotesize\textcolor{foo}{\fontfamily{phv}\selectfont\bfseries\thechapter.\arabic{figure}}}
\renewcommand{\figurename}{\footnotesize\textcolor{foo}{\fontfamily{phv}\selectfont\bfseries Fig.}}
\renewcommand{\thetable}{\footnotesize\textcolor{foo}{\fontfamily{phv}\selectfont\bfseries\arabic{table}}}
\renewcommand{\tablename}{\footnotesize\textcolor{foo}{\fontfamily{phv}\selectfont\bfseries Table}}

